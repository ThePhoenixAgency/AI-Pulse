<!DOCTYPE html>
<!--
================================================================================
AI-PULSE - APPLICATION LECTEUR (app.html)
================================================================================

DESCRIPTION:
    Cette page est l'application principale de lecture des articles.
    Elle affiche le lecteur (reader.html) dans une iframe.

RÔLE:
    - Afficher le lecteur d'articles dans un cadre (iframe)
    - Fournir une navigation cohérente avec le reste du site
    - Transmettre les paramètres URL au lecteur

FONCTIONNEMENT:
    La page charge reader.html dans une iframe qui prend toute la hauteur
    disponible. Les paramètres de l'URL (comme ?category=ai) sont transmis
    au lecteur pour filtrer les articles.

FICHIERS LIÉS:
    - reader.html : Le vrai lecteur d'articles (affiché dans l'iframe)
    - css/style.css : Styles de la page
    - js/ui.js : Logique de l'interface
    - js/tracker.js : Suivi des statistiques

VERSION: 1.0.0
DERNIÈRE MISE À JOUR: Février 2026
================================================================================
-->
<html lang="fr">

<head>
    <!--
    ============================================================================
    EN-TÊTE HTML (HEAD)
    ============================================================================
    Métadonnées et ressources nécessaires au bon fonctionnement de la page.
    ============================================================================
    -->

    <!-- Encodage UTF-8 pour les caractères spéciaux -->
    <meta charset="UTF-8">

    <!-- Configuration pour les écrans mobiles -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Titre de l'onglet -->
    <title>AI-Pulse - Reader</title>

    <!-- Lien vers l'app GitHub iOS -->
    <meta name="apple-itunes-app"
        content="app-id=1477376905, app-argument=https://github.com/ThePhoenixAgency/AI-Pulse">

    <!-- Favicon (icône de l'onglet) -->
    <link rel="icon" type="image/svg+xml" href="./favicon.svg">

    <!-- Icône pour appareils Apple -->
    <link rel="apple-touch-icon" href="./assets/icon.png">

    <!-- Manifest pour PWA -->
    <link rel="manifest" href="./manifest.json">

    <!-- Feuille de styles principale -->
    <link rel="stylesheet" href="./css/style.css">

    <!--
    ============================================================================
    STYLES SPÉCIFIQUES À CETTE PAGE
    ============================================================================

    Ces styles sont propres à app.html et ne sont pas dans style.css.
    Ils permettent à l'iframe de prendre toute la hauteur disponible.

    EXPLICATION:
    - body height: 100vh : Le corps prend toute la hauteur de la fenêtre
    - overflow: hidden : Pas de défilement sur le body (le défilement est dans l'iframe)
    - iframe flex: 1 : L'iframe prend tout l'espace restant
    - background: #0d1117 : Fond sombre pendant le chargement
    ============================================================================
    -->
    <style>
        /* ====================================================================
           MISE EN PAGE SPÉCIFIQUE À L'APPLICATION
           ====================================================================

           Ces règles permettent d'avoir :
           - L'en-tête en haut
           - L'iframe au milieu (qui prend tout l'espace)
           - Le pied de page en bas

           Le tout sans défilement sur la page principale.
        ==================================================================== */

        /* Le body prend toute la hauteur de la fenêtre */
        body {
            height: 100vh;          /* vh = viewport height (hauteur de la fenêtre) */
            overflow: hidden;        /* Pas de barre de défilement sur le body */
        }

        /* L'iframe s'étend pour remplir l'espace disponible */
        iframe {
            flex: 1;                 /* Prend tout l'espace restant (flexbox) */
            width: 100%;             /* Largeur à 100% */
            border: none;            /* Pas de bordure autour de l'iframe */
            background: #0d1117;     /* Fond sombre pendant le chargement */
        }
    </style>
</head>

<body>
    <!--
    ============================================================================
    EN-TÊTE DU SITE (HEADER)
    ============================================================================

    Barre de navigation identique aux autres pages.
    Le lien "Reader" est marqué comme actif (.active).
    ============================================================================
    -->
    <header class="site-header">
        <!-- Logo du site -->
        <div class="brand-logo">
            <!--
            Logo avec effet de transparence
            - mix-blend-mode: screen : Le logo se mélange avec le fond
              (les parties noires deviennent transparentes)
            -->
            <img src="./assets/logo_final.png" alt="AI-PULSE" style="height: 55px; mix-blend-mode: screen;">
        </div>

        <!-- Navigation -->
        <nav class="nav-links">
            <a href="index.html">Home</a>
            <!-- Cette page est active -->
            <a href="app.html" class="active">Reader</a>
            <a href="about.html">About</a>
        </nav>
    </header>

    <!--
    ============================================================================
    CONTENU PRINCIPAL - IFRAME DU LECTEUR
    ============================================================================

    L'iframe charge reader.html qui contient le vrai lecteur d'articles.

    POURQUOI UNE IFRAME ?
    - Permet d'avoir une navigation fixe (header/footer) autour du contenu
    - Le lecteur peut défiler indépendamment
    - Les paramètres URL peuvent être transmis facilement

    ATTRIBUTS:
    - id="appReaderFrame" : Pour pouvoir le manipuler en JavaScript
    - src="./reader.html" : Page chargée par défaut
    - title : Accessibilité (description pour les lecteurs d'écran)
    ============================================================================
    -->
    <iframe id="appReaderFrame" src="./reader.html" title="AI-Pulse Content"></iframe>

    <!--
    ============================================================================
    PIED DE PAGE (FOOTER)
    ============================================================================
    Liens utiles et copyright, identiques aux autres pages.
    ============================================================================
    -->
    <footer class="site-footer">
        <div class="footer-links">
            <a href="privacy.html">Privacy</a>
            <span>•</span>
            <a href="stats.html">Statistics</a>
            <span>•</span>
            <a href="portfolio.html">Portfolio</a>
            <span>•</span>
            <a href="https://github.com/ThePhoenixAgency/AI-Pulse" target="_blank">GitHub</a>
            <span>•</span>
            <a href="https://github.com/ThePhoenixAgency/AI-Pulse/issues/new?template=subscribe.yml" target="_blank">S'abonner</a>
        </div>
        <p>&copy; 2026 <a href="https://ThePhoenixAgency.github.io" target="_blank">ThePhoenixAgency</a>. All rights reserved.</p>
    </footer>

    <!-- Scripts JavaScript -->
    <script src="./js/tracker.js"></script>
    <script src="./js/ui.js"></script>

    <!--
    ============================================================================
    SCRIPT DE TRANSMISSION DES PARAMÈTRES URL
    ============================================================================

    Ce script transmet les paramètres URL de app.html vers reader.html.

    EXEMPLE:
    Si l'utilisateur visite : app.html?category=ai&lang=fr
    L'iframe chargera : reader.html?category=ai&lang=fr

    ÉTAPES:
    1. Attendre que la page soit chargée (DOMContentLoaded)
    2. Lire les paramètres de l'URL actuelle
    3. Si des paramètres existent, les ajouter à l'URL de l'iframe

    UTILITÉ:
    - Permet de partager des liens filtrés (ex: app.html?category=cybersecurity)
    - Les filtres sont appliqués directement au chargement
    ============================================================================
    -->
    <script>
        // Attendre que la page soit complètement chargée
        window.addEventListener('DOMContentLoaded', () => {

            // Récupérer les paramètres de l'URL actuelle
            // Exemple: ?category=ai&lang=fr devient un objet URLSearchParams
            const params = new URLSearchParams(window.location.search);

            // Récupérer l'élément iframe
            const iframe = document.getElementById('appReaderFrame');

            // Si des paramètres existent ET que l'iframe existe
            if (params.toString() && iframe) {
                // Modifier l'URL de l'iframe pour inclure les paramètres
                // L'iframe rechargera automatiquement avec la nouvelle URL
                iframe.src = `./reader.html?${params.toString()}`;
            }
        });
    </script>
</body>

</html>
