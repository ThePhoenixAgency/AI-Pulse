<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>C.A.F.E. dans Home Assistant : des automatisations façon Node-RED… sans Node-RED - Maison et Domotique</title>
<style>
  body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.55; color: #e2e8f0; max-width: 800px; margin: 26px auto; padding: 0 18px; background: #0a0e27; }
  h1 { color: #00d9ff; margin-bottom: 0.35em; line-height: 1.22; font-size: clamp(1.45rem, 2.1vw, 1.95rem); font-weight: 700; }
  h2, h3 { line-height: 1.28; margin: 1.1em 0 0.45em; }
  .metadata { color: #94a3b8; font-size: 0.86em; margin-bottom: 1.2em; border-bottom: 1px solid rgba(0,217,255,0.2); padding-bottom: 0.7em; }
  img { max-width: 100%; width: auto !important; height: auto !important; object-fit: contain !important; border-radius: 8px; display: block; margin: 0.6em auto; }
  a { color: #00d9ff; }
  p { margin-bottom: 0.72em; line-height: 1.58; }
  ul, ol { margin: 0.5em 0 0.9em 1.1em; }
  li { margin: 0.18em 0; }
  blockquote { border-left: 3px solid #825ee4; padding-left: 12px; margin: 0.8em 0; color: #94a3b8; }
  code { background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; color: #ff79c6; }
  pre { background: rgba(0,0,0,0.4); padding: 12px; border-radius: 6px; overflow-x: auto; }
  .article-elevator { position: fixed; right: 14px; bottom: 14px; display: flex; flex-direction: column; gap: 8px; z-index: 9999; }
  .article-elevator-btn { width: 36px; height: 36px; border: 1px solid rgba(0,217,255,0.35); border-radius: 10px; background: rgba(10,14,39,0.88); color: #00d9ff; cursor: pointer; font-size: 16px; line-height: 1; }
  .article-elevator-btn:hover { background: rgba(10,14,39,1); }
</style>
</head>
<body>
  <h1>C.A.F.E. dans Home Assistant : des automatisations façon Node-RED… sans Node-RED - Maison et Domotique</h1>
  <div class="metadata">
    Source: Maison et Domotique | Date: 1/22/2026 6:01:00 AM | Lang: FR |
    <a href="https://www.maison-et-domotique.com/167390-cafe-home-assistant-automatisations-facon-node-red/" target="_blank">Original Article</a>
  </div>
  <div class="content">
    <div><article> <p><a href="https://fezvrasta.github.io/cafe/" target="_blank">C.A.F.E.</a> (Complex Automation Flow Editor) est une intégration qui ajoute à <a href="https://www.maison-et-domotique.com/tag/home-assistant/">Home Assistant</a> un éditeur visuel “en flux”, un peu dans l’esprit de <a href="https://nodered.org/" target="_blank">Node-RED</a>, mais avec une différence majeure : C.A.F.E. n’est pas un moteur d’exécution. Home Assistant reste le seul à exécuter vos automatisations. C.A.F.E. se contente de transformer votre schéma visuel en YAML 100% conforme et stocké directement dans le système Home Assistant.</p> <p>En clair, vous dessinez la logique avec des blocs reliés par des flèches, puis vous enregistrez… et Home Assistant exécute comme d’habitude. Pas de conteneur Docker à ajouter, pas de base de données à maintenir, pas d’addon qui devient le maillon faible, comme c’est le cas avec Node-Red. C’est exactement la promesse “zéro surcharge” mise en avant par le projet. </p> <figure><img src="https://www.maison-et-domotique.com/wp-content/uploads/2026/01/cafe-schema-702x385.png" alt="cafe schema"></figure> <h2>Pourquoi c’est intéressant pour Home Assistant</h2> <p>Si vous aimez le YAML, vous savez déjà pourquoi : c’est robuste, natif, prévisible… mais dès qu’une automatisation prend de l’ampleur, on se retrouve vite avec un mur de texte. C.A.F.E. vise précisément ce moment où “ça devient le plat de spaghettis”. Il sait lire une automatisation existante et reconstruire une carte visuelle, ce qui est très pratique pour auditer, comprendre, remettre à plat.</p> <p>Si vous veniez de Node-RED, le côté rassurant est ailleurs : vous retrouvez une logique en nœuds, mais sans basculer l’exécution hors de Home Assistant. C.A.F.E. change l’interface, pas le moteur, et vous pouvez repasser à l’éditeur natif à tout moment.</p> <p>Il y a aussi deux “bonus” qui parlent à beaucoup de monde :</p> <ul>
<li>C.A.F.E. gère mieux la notion de variables côté interface visuelle, alors que l’éditeur visuel natif de Home Assistant force souvent à mettre les mains dans le YAML pour ce genre de choses.</li> <li>C.A.F.E. s’intègre avec la trace Home Assistant : l’objectif est de garder le débogage dans les outils officiels, sans inventer un univers parallèle.</li>
</ul> <figure><img src="https://www.maison-et-domotique.com/wp-content/uploads/2026/01/comparatif-cafe.png" alt="comparatif cafe"></figure> <h2>Le “truc” malin : pas de verrouillage, pas de format exotique</h2> <p>C’est probablement l’argument le plus rassurant : si vous désinstallez C.A.F.E., vos automatisations continuent de fonctionner. Vous perdez surtout la mise en page visuelle (positions des blocs), pas la logique, puisqu’elle reste du YAML standard.</p> <p>Et pour conserver cette mise en page, C.A.F.E. stocke des métadonnées (positions des nœuds, etc.) dans un objet “inoffensif” au sein du bloc <code>variables</code> de l’automatisation. Vous pouvez modifier une automatisation dans Home Assistant, puis la rouvrir dans C.A.F.E. : les deux éditent la même source.</p> <h2>Installation de C.A.F.E. dans Home Assistant (via HACS)</h2> <p>La méthode recommandée passe par HACS, avec ajout du dépôt personnalisé. Le README officiel donne la marche à suivre : dans HACS, section Integrations, menu des trois points, “Dépôts personnalisés”, puis ajout de <code>https://github.com/FezVrasta/cafe-hass</code> en tant qu’intégration. </p> <figure><img src="https://www.maison-et-domotique.com/wp-content/uploads/2026/01/cafe-depot-personnalise-200x500.png" alt="cafe depot personnalise"></figure> <p>Ensuite, on retrouve C.A.F.E. dans HACS, et on l’installe (télécharge).</p> <p>Redémarrage de Home Assistant, puis ajout de l’intégration C.A.F.E. via Paramètres → Appareils et services → Ajouter une intégration.</p> <figure><img src="https://www.maison-et-domotique.com/wp-content/uploads/2026/01/cafe-integration-702x340.png" alt="cafe integration"></figure> <p>Une fois en place, C.A.F.E. apparaît dans la barre latérale de Home Assistant sous forme de panneau. Ce n’est pas un “dashboard” Lovelace, c’est bien une entrée dans la sidebar.</p> <figure><img src="https://www.maison-et-domotique.com/wp-content/uploads/2026/01/cafe-menu-369x500.png" alt="cafe menu"></figure> <h2>Vous voulez tester sans installer ?</h2> <p>Il est possible d’<a href="https://fezvrasta.github.io/cafe-hass" target="_blank">essayer C.A.F.E. sans rien installer</a>, via une interface web, à condition d’avoir un accès distant à Home Assistant.</p> <figure><img src="https://www.maison-et-domotique.com/wp-content/uploads/2026/01/test-cafe-335x500.png" alt="test cafe"></figure> <p>En pratique, gardez en tête qu’exposer Home Assistant sur Internet se fait proprement (Nabu Casa, reverse proxy, authentification, etc.). C’est faisable, mais on évite le mode “yolo” quand il s’agit de domotique.</p> <p>Si vous ne souhaitez pas donner accès à votre Home Assistant (ce qui est totalement compréhensible), je vous ai installé C.A.F.E. sur le <a href="https://testhomeassistant.fr/" target="_blank">serveur de tests Home Assistant</a> que je vous ai mis à disposition depuis quelques semaines, ce qui vous permettra de tester en conditions sans tout casser chez vous ni avoir besoin de donner un accès distant ;-)</p> <h2>Prise en main : comment on s’en sert au quotidien</h2> <p>Une fois dans C.A.F.E., l’interface est très “flow editor” : une palette de nœuds à gauche (déclencheurs, conditions, actions, délais, attentes…), un grand canvas central où l’on dépose les blocs, et un panneau de propriétés à droite pour configurer chaque nœud. Vous pouvez zoomer, vous déplacer, et même utiliser une mini-carte pour naviguer dans les automatisations complexes.</p> <figure><img src="https://www.maison-et-domotique.com/wp-content/uploads/2026/01/cafe-1-702x261.png" alt="cafe 1"></figure> <p>Le scénario typique ressemble à ça : vous déposez un déclencheur (par exemple “mouvement détecté”), vous ajoutez une condition (par exemple “il fait nuit”), puis une action (par exemple “allumer la lampe du couloir”), et vous reliez le tout. Ensuite, vous ouvrez chaque nœud pour sélectionner entités et services. C.A.F.E. s’appuie sur l’intelligence des entités côté Home Assistant (auto-complétion, connaissance des états via API) pour éviter de taper des identifiants à la main.</p> <p>Point très pratique : vous pouvez ouvrir une automatisation existante, la voir se “poser” sur le canvas, bouger les blocs pour y voir clair, modifier, puis enregistrer dans Home Assistant. Vous éditez, vous sauvegardez, et vous retrouvez l’automatisation dans l’éditeur natif, avec du YAML enrichi par les métadonnées de mise en page !</p> <figure><img src="https://www.maison-et-domotique.com/wp-content/uploads/2026/01/cafe-2-702x344.png" alt="cafe 2"></figure> <h2>Importer, exporter, déboguer</h2> <p>C.A.F.E. sait importer une automatisation existante et il peut aussi importer du YAML ou du JSON, puis exporter un flow en JSON. C’est utile pour partager un “schéma” ou archiver une version avant de refondre une logique un peu délicate.</p> <p>Côté debug, l’idée est simple : garder une lecture claire de l’exécution. On retrouve un mode de débogage avec indicateur de “pas à pas” et options pour simuler des résultats de conditions, afin de visualiser le chemin pris dans l’automatisation.<br>Et côté projet, l’intégration avec la Trace View Home Assistant fait partie des points forts annoncés : vous restez dans les outils officiels pour analyser ce qui s’est passé.</p> <h2>Exemples concrets où C.A.F.E. fait vraiment la différence</h2> <p>Prenez une automatisation “lumières du soir” un peu réaliste. Déclenchement : juste avant le coucher du soleil. Condition : uniquement si on est avant une certaine heure (sinon, trop tard, inutile). Action : allumer certaines lampes, mais avec une luminosité différente selon une fenêtre horaire. En YAML, ça finit souvent en “choose” imbriqués et en conditions qui se croisent. Dans C.A.F.E., ce genre de logique devient une carte routière : on voit les embranchements, on voit les chemins, on respire. Et c’est exactement le type d’exemple montré dans la transcription.</p> <p>Autre cas très parlant : les scénarios avec variables. Exemple tout bête : vous appelez un script qui renvoie une info (température, tarif, état synthétisé), vous stockez la réponse dans une variable, puis vous réutilisez cette variable dans des actions suivantes, via des templates Jinja. Le README explique le mécanisme des “script responses” (<code>response_variable</code>) et l’usage en Jinja <code>{{ variable.champ }}</code> dans les nœuds suivants.</p> <figure><img src="https://www.maison-et-domotique.com/wp-content/uploads/2026/01/capture-decran-2026-01-21-092039-702x241.png" alt="capture decran 2026 01 21 092039"></figure> <p>Et pour les installateurs ou les utilisateurs avancés : dès qu’on parle de boucles, de retours en arrière, de logiques non linéaires, C.A.F.E. annonce une compilation “optimisée” qui peut générer une structure de type “state machine” quand c’est nécessaire, tout en restant 100% compatible Home Assistant.</p> <h2>Limites et précautions (parce que oui, c’est une bêta)</h2> <p>Le projet est présenté comme “non destructif”, mais il reste en bêta, avec des corrections fréquentes. Première règle : faites une sauvegarde de vos automatisations avant de modifier des choses importantes.</p> <p>Deuxième règle : sur une automatisation critique (alarme, chauffage, sécurité), allez-y progressivement. Testez d’abord sur une automatisation simple, comparez le YAML avant/après, vérifiez la trace, puis montez en complexité. C’est un peu la méthode “on ne rénove pas une maison en cassant tous les murs d’un coup” (et votre future tranquillité vous dira merci !).</p> <p>Troisième règle : acceptez l’idée que l’auto-layout et la reconstruction visuelle ne seront pas parfaits à 100% sur du YAML très artisanal. Le projet le reconnaît : l’import de YAML manuel complexe peut avoir des aspérités.</p> <h2>Faut-il l’adopter maintenant ?</h2> <p>Si vous êtes à l’aise avec l’éditeur natif et que vos automatisations restent simples, C.A.F.E. n’est pas “obligatoire”. En revanche, si vous avez des scénarios qui partent dans tous les sens, si vous détestez relire du YAML long comme un jour sans Wi-Fi, ou si vous aimez le confort visuel de Node-RED mais sans vouloir d’un second moteur, C.A.F.E. coche beaucoup de cases : visuel, natif, sans surcharge, et sans piège à long terme puisqu’on reste sur des automatisations Home Assistant standards. Ici en tout cas il est adopté !</p> </article></div>
  </div>
  <div class="article-elevator" aria-label="Navigation article">
    <button class="article-elevator-btn" type="button" onclick="scrollToTop()">▲</button>
    <button class="article-elevator-btn" type="button" onclick="scrollToBottom()">▼</button>
  </div>
  <script>
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'auto' });
    }
    function scrollToBottom() {
      window.scrollTo({ top: document.documentElement.scrollHeight, behavior: 'auto' });
    }
    window.addEventListener('message', (event) => {
      const data = event && event.data;
      if (!data || data.type !== 'AI_PULSE_SCROLL') return;
      if (data.direction === 'up' || data.direction === 'top') scrollToTop();
      if (data.direction === 'down' || data.direction === 'bottom') scrollToBottom();
    });
  </script>
</body>
</html>