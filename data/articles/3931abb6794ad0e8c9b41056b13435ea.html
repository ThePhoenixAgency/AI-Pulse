<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sofabaton X2 integration</title>
<style>
  body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.55; color: #e2e8f0; max-width: 800px; margin: 26px auto; padding: 0 18px; background: #0a0e27; }
  h1 { color: #00d9ff; margin-bottom: 0.35em; line-height: 1.22; font-size: clamp(1.45rem, 2.1vw, 1.95rem); font-weight: 700; }
  h2, h3 { line-height: 1.28; margin: 1.1em 0 0.45em; }
  .metadata { color: #94a3b8; font-size: 0.86em; margin-bottom: 1.2em; border-bottom: 1px solid rgba(0,217,255,0.2); padding-bottom: 0.7em; }
  img { max-width: 100%; width: auto !important; height: auto !important; object-fit: contain !important; border-radius: 8px; display: block; margin: 0.6em auto; }
  a { color: #00d9ff; }
  p { margin-bottom: 0.72em; line-height: 1.58; }
  ul, ol { margin: 0.5em 0 0.9em 1.1em; }
  li { margin: 0.18em 0; }
  blockquote { border-left: 3px solid #825ee4; padding-left: 12px; margin: 0.8em 0; color: #94a3b8; }
  code { background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; color: #ff79c6; }
  pre { background: rgba(0,0,0,0.4); padding: 12px; border-radius: 6px; overflow-x: auto; }
  .article-elevator { position: fixed; right: 14px; bottom: 14px; display: flex; flex-direction: column; gap: 8px; z-index: 9999; }
  .article-elevator-btn { width: 36px; height: 36px; border: 1px solid rgba(0,217,255,0.35); border-radius: 10px; background: rgba(10,14,39,0.88); color: #00d9ff; cursor: pointer; font-size: 16px; line-height: 1; }
  .article-elevator-btn:hover { background: rgba(10,14,39,1); }
  [id*="overlay"], [class*="overlay"], [id*="modal"], [class*="modal"], [id*="popup"], [class*="popup"],
  [id*="paywall"], [class*="paywall"], [id*="subscribe"], [class*="subscribe"], [id*="cookie"], [class*="cookie"],
  [id*="consent"], [class*="consent"], [id*="gdpr"], [class*="gdpr"], [role="dialog"], [aria-modal="true"] {
    display: none !important;
    visibility: hidden !important;
    pointer-events: none !important;
  }
</style>
</head>
<body>
  <h1>Sofabaton X2 integration</h1>
  <div class="metadata">
    Source: openHAB Community (Latest) | Date: 2/24/2026 10:03:32 AM | <a href="https://community.openhab.org/t/sofabaton-x2-integration/168627" target="_blank" rel="noopener noreferrer">Lien</a> | Lang: EN
  </div>
  <div class="content">
    <div><div> <p>I’ve recently received a Sofatbaton X2 and have now managed to get it working well with Openhab. I thought others might find my discoveries useful.</p>
<p>I wanted to trigger a number of power switches which are Tapo (TP-Link) Wifi devices. However, there is no specific integration with Tapo/TP-Link on the Remote. So I have found a way to do this via Openhab.</p>
<p>There’s no specific integration with Openhab, but I’ve used a combination of the Sofabaton X2 integration with Home Assistant and a few rules in Openhab.</p>
<p>The HA integration is simply using MQTT messages. So to get this to work, you first need to make sure you have installed the MQTT broker binding and have an MQTT broker up and running.</p>
<p>Here’ are the steps I took:</p>
<p><strong>1) Setup the link to your MQTT broker in the Sofabaton App</strong></p>
<p>From the Sofabaton App, choose ‘Me’ in the bottom right, then ‘Connect to Home Assistant’</p>
<p>Confirm you’ve installed the MQTT server, just hit next on the confirmation page</p>
<p>Enter the url and port of your MQTT server, username and password</p>
<p>You should get a confirmation screen saying it’s all setup.</p>
<div><a href="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/original/3X/4/0/409e4003f62ad758b94f1cdce0250b8bee012cfd.jpeg"><img src="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/optimized/3X/4/0/409e4003f62ad758b94f1cdce0250b8bee012cfd_2_230x500.jpeg" alt="sofabaton - 1"></a></div>
<div><a href="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/original/3X/3/2/325e1b8bc82ca5a24c7fde4ffc307084685e98cf.jpeg"><img src="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/optimized/3X/3/2/325e1b8bc82ca5a24c7fde4ffc307084685e98cf_2_230x500.jpeg" alt="sofabaton - 2"></a></div>
<div><a href="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/original/3X/4/6/4619ceb62d99c2ed2436ab8fd0230fb82f05f4cc.jpeg"><img src="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/optimized/3X/4/6/4619ceb62d99c2ed2436ab8fd0230fb82f05f4cc_2_230x500.jpeg" alt="sofabaton - 3"></a></div>
<p><strong>2) Setup a device on your Sofabaton remote</strong></p>
<p>Still in the app, go to the devices screen and hit the + sign to add a new device. Choose ‘Wi-Fi’ control method.</p>
<p>Then choose ‘Home Assistant Remote’</p>
<div><a href="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/original/3X/8/2/824fe2a7cb951dac183f97ff494010d9c4907bf2.jpeg"><img src="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/optimized/3X/8/2/824fe2a7cb951dac183f97ff494010d9c4907bf2_2_230x500.jpeg" alt="sofabaton - 4"></a></div>
<div><a href="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/original/3X/e/0/e04d52408c64e982bbbf31af05d03a85ae4685f6.jpeg"><img src="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/optimized/3X/e/0/e04d52408c64e982bbbf31af05d03a85ae4685f6_2_230x500.jpeg" alt="sofabaton - 5"></a></div>
<p><strong>3) Add action buttons to your remote</strong></p>
<p>You now need to add action buttons that will appear on your remote.</p>
<p>Note, that you can only modify the command name - ie, the name that appears on the button. Each button will be assigned a unique button number, there’s no way to change this - it’s allocated by the app.</p>
<p>You’ll see a ‘Topic’ and ‘Payload’ displayed under the command name. These are the important codes you need to copy and use in Openhab.</p>
<p>The topic will always be the same for your remote - this is it’s MAC address followed by /up</p>
<p>The payload is a combination of a <code>device_id</code> and <code>key_id</code></p>
<p>The device is the device number in your list (ie, for me it was device number 8). The key number is the sequential number of the key. ie, the first button you add will be 1, then 2, 3, etc. As i say,there is no way to change this - you just have to remember which button number responds to your command name.</p>
<div><a href="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/original/3X/2/9/293a57d2c7a04d5e7644114762cf69a2947054a3.jpeg"><img src="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/optimized/3X/2/9/293a57d2c7a04d5e7644114762cf69a2947054a3_2_230x500.jpeg" alt="sofabaton - 1 (1)"></a></div>
<p>Hit next, you see the button commands you’ve setup. You can add as many as you like.</p>
<div><a href="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/original/3X/9/0/9020d3b9a79b985f589a032210bab921bcb94404.jpeg"><img src="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/optimized/3X/9/0/9020d3b9a79b985f589a032210bab921bcb94404_2_230x500.jpeg" alt="sofabaton - 2 (1)"></a></div>
<p>Once you’ve created you buttons, you’ll be asked to name the device and the app will download the settings to your remote.</p>
<p>You’ll now see a new device. Here, I created one for all my Tapo plugs called ‘Plugs’:</p>
<div><a href="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/original/3X/5/a/5acf306e71fa1eb9673787e9b0a21e15b1fc872d.jpeg"><img src="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/optimized/3X/5/a/5acf306e71fa1eb9673787e9b0a21e15b1fc872d_2_230x500.jpeg" alt="sofabaton - 3 (1)"></a></div>
<p>When i click it, I see the command buttons I’ve setup:</p>
<div><a href="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/original/3X/4/1/4112935f65527c904dfc5a79193acf7125827ecf.jpeg"><img src="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/optimized/3X/4/1/4112935f65527c904dfc5a79193acf7125827ecf_2_230x500.jpeg" alt="sofabaton - 4 (1)"></a></div>
<p>These are also displayed on the screen on the Sofabaton X2.</p>
<p>Now over to Openhab setup steps….</p>
<p><strong>4) Create a Generic MQTT Thing to receive your Sofabaton messages</strong></p>
<p>You need to create a Generic MQTT Thing that receives the MQTT message from the Sofabaton remote (I’m assuming here you’ve already setup your MQTT bridge in Openhab - if not, there’s a lot of posts on how to do that).</p>
<p>Create a new Thing by selecting the MQTT binding and then ‘Generic MQTT Thing’ as the Thing type.</p>
<p>Make sure you select your MQTT bridge when setting up your new Thing. Once you do this, your Thing should show online.</p>
<div><a href="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/original/3X/9/5/95c19d721f708f0906557282792b70338e517be2.png"><img src="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/optimized/3X/9/5/95c19d721f708f0906557282792b70338e517be2_2_670x500.png" alt="image"></a></div>
<p><strong>5) Create channels to receive data sent from Sofabaton</strong></p>
<p>Create 2 channels: one for the <em><code>Device_ID</code></em>, one for the <em><code>Key_ID</code></em>. In both of these, add your ‘topic’ from the Sofabaton command into ‘<em>State Topic</em>’. Remember to add the ‘<em><code>/up</code></em>’. So your command should be:</p>
<p><em><code>[mac-address-of your remote]/up</code></em></p>
<p>You don’t need to enter the command topic. As Sofabaton currently only supports sending commands from the remote to Openhab - ie, it’s state read only.</p>
<p>Now here’s the fun part….</p>
<p>We are going to need to handle the format of the JSON payload coming in from the remote.</p>
<p>Click on ‘Show Advanced’ on your Channel. Enter the incoming Value Transformation as:</p>
<p><code>JSONPATH:$.device_id</code></p>
<p>or</p>
<p><code>JSONPATH:$:key_id</code></p>
<p>Note: you’ll need to make sure you already have the JSONPATH transformation binding for this to work (I assume you probably do if you are already using MQTT). If not, add it from the bindings add-on store).</p>
<div><a href="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/original/3X/1/0/10079153fd911ce02302a4ae38428f8be6f544a4.png"><img src="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/optimized/3X/1/0/10079153fd911ce02302a4ae38428f8be6f544a4_2_513x500.png" alt="image"></a></div>
<p><strong>6) Create an item for each channel</strong></p>
<p>Create new items for the <code>device_id</code> and <code>key_id</code>. Make them both string types. (I tried point and that didn’t seem to work).</p>
<p><strong>7) Test your commands are being received</strong></p>
<p>You should now be able to press the command buttons you created on your remote, and see those <code>device_id</code> and <code>key_id</code> values changing in Openhab. If you do - well done! you are connected <img src="https://community.openhab.org/images/emoji/twitter/clap.png?v=15" alt=":clap:"> <img src="https://community.openhab.org/images/emoji/twitter/clinking_glasses.png?v=15" alt=":clinking_glasses:"> (maybe not the device_id if you’ve only created 1 device!).</p>
<p><strong>8) Create a rule to manage your Sofabaton commands</strong></p>
<p>You’ll need to create a rule (or rules) to handle the receiving commands and perform your desired actions. You could create one rule for each button directly in the rules UI. To do this, make sure you choose the ‘Was Updated’ trigger:</p>
<div><a href="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/original/3X/4/0/404538660b04ec09eb1fd8d2076f0002046efd8b.png"><img src="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/optimized/3X/4/0/404538660b04ec09eb1fd8d2076f0002046efd8b_2_690x314.png" alt="image"></a></div>
<div><a href="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/original/3X/7/c/7c7fae341f5b8926cf51318d59915f29ec538aa9.png"><img src="https://community-openhab-org.s3.dualstack.eu-central-1.amazonaws.com/optimized/3X/7/c/7c7fae341f5b8926cf51318d59915f29ec538aa9_2_509x500.png" alt="image"></a></div>
<p>This gets very messy once you have a few buttons. And if you end up with setting up multiple devices, it’ll be unmanageable.</p>
<p><em><strong>The better way is to set a text file rule using Switch logic</strong></em></p>
<p>To do this, you need to create a file in your rules folder with a .rules extension. eg, sofabaton.rules</p>
<p>Here’s the code I created to handle 4 command buttons:</p>
<pre><code>rule "Sofabaton Device #7"
when Item Sofabaton_Device_ID received update "7"
then var buttonNumber = Sofabaton_Sofabaton_Key.state logInfo("Sofabaton","Button {}", Sofabaton_Sofabaton_Key.state) switch(buttonNumber) { case 1 : { AVPowerStrip_Outlet1_Switch.sendCommand(if(AVPowerStrip_Outlet1_Switch.state == ON) OFF else ON) } case 2 : { AVPowerStrip_Outlet2_Switch.sendCommand(if(AVPowerStrip_Outlet2_Switch.state == ON) OFF else ON) } case 3 : { CurveLight.sendCommand(if(CurveLight.state == ON) OFF else ON) } case 4 : { CoffeeLight.sendCommand(ON) } }
end </code></pre>
<p>The first three are ‘toggle’ buttons. So turn on if off, and off if on</p>
<p>The 4th just turns the light on all the time, you’ll probably need a separate light off command if you want to do this.</p>
<p><strong>Conclusion</strong></p>
<p>It’s a little fiddly, but once you get the first button done, it’s pretty easy to add new ones. The performance is excellent - instant i would say.</p>
<p>I’m not sure I’d use the sofabaton remote for a home control remote, but for those key on/off switches or light scene switching for movie nite it works really well.</p>
<p>Let me know how you get on!</p> </div></div>
  </div>
  <div class="article-elevator" aria-label="Navigation article">
    <button class="article-elevator-btn" type="button" onclick="scrollToTop()">▲</button>
    <button class="article-elevator-btn" type="button" onclick="scrollToBottom()">▼</button>
  </div>
  <script>
    function stripBlockingPanels() {
      const selector = '[id*="overlay"], [class*="overlay"], [id*="modal"], [class*="modal"], [id*="popup"], [class*="popup"], [id*="paywall"], [class*="paywall"], [id*="subscribe"], [class*="subscribe"], [id*="cookie"], [class*="cookie"], [id*="consent"], [class*="consent"], [id*="gdpr"], [class*="gdpr"], [role="dialog"], [aria-modal="true"]';
      const textPattern = /\b(cookie|consent|gdpr|subscribe|subscription|paywall|abonnez[-\s]?vous|inscrivez[-\s]?vous|continue reading|continuez la lecture)\b/i;
      document.querySelectorAll(selector).forEach((node) => node.remove());
      document.querySelectorAll('div, section, aside').forEach((node) => {
        const styleAttr = String(node.getAttribute('style') || '').toLowerCase();
        const classAndId = String(node.className || '').toLowerCase() + ' ' + String(node.id || '').toLowerCase();
        const text = String(node.textContent || '').slice(0, 800);
        const hasKeyword = textPattern.test(classAndId) || textPattern.test(text);
        const looksFixed = /(position\s*:\s*(fixed|sticky)|inset\s*:|top\s*:|left\s*:|right\s*:|bottom\s*:)/.test(styleAttr);
        const hasPriority = /(z-index\s*:\s*[1-9]\d{1,}|backdrop-filter|overflow\s*:\s*hidden)/.test(styleAttr);
        if (hasKeyword && (looksFixed || hasPriority)) node.remove();
      });
    }
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'auto' });
    }
    function scrollToBottom() {
      window.scrollTo({ top: document.documentElement.scrollHeight, behavior: 'auto' });
    }
    window.addEventListener('message', (event) => {
      const data = event && event.data;
      if (!data || data.type !== 'AI_PULSE_SCROLL') return;
      if (data.direction === 'up' || data.direction === 'top') scrollToTop();
      if (data.direction === 'down' || data.direction === 'bottom') scrollToBottom();
    });
    stripBlockingPanels();
    setTimeout(stripBlockingPanels, 60);
    setTimeout(stripBlockingPanels, 220);
    setTimeout(stripBlockingPanels, 650);
  </script>
</body>
</html>