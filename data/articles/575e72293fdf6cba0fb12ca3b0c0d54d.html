<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Napkin — Documentation</title>
<style>
  body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.55; color: #e2e8f0; max-width: 800px; margin: 26px auto; padding: 0 18px; background: #0a0e27; }
  h1 { color: #00d9ff; margin-bottom: 0.35em; line-height: 1.22; font-size: clamp(1.45rem, 2.1vw, 1.95rem); font-weight: 700; }
  h2, h3 { line-height: 1.28; margin: 1.1em 0 0.45em; }
  .metadata { color: #94a3b8; font-size: 0.86em; margin-bottom: 1.2em; border-bottom: 1px solid rgba(0,217,255,0.2); padding-bottom: 0.7em; }
  img { max-width: 100%; width: auto !important; height: auto !important; object-fit: contain !important; border-radius: 8px; display: block; margin: 0.6em auto; }
  a { color: #00d9ff; }
  p { margin-bottom: 0.72em; line-height: 1.58; }
  ul, ol { margin: 0.5em 0 0.9em 1.1em; }
  li { margin: 0.18em 0; }
  blockquote { border-left: 3px solid #825ee4; padding-left: 12px; margin: 0.8em 0; color: #94a3b8; }
  code { background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; color: #ff79c6; }
  pre { background: rgba(0,0,0,0.4); padding: 12px; border-radius: 6px; overflow-x: auto; }
  .article-elevator { position: fixed; right: 14px; bottom: 14px; display: flex; flex-direction: column; gap: 8px; z-index: 9999; }
  .article-elevator-btn { width: 36px; height: 36px; border: 1px solid rgba(0,217,255,0.35); border-radius: 10px; background: rgba(10,14,39,0.88); color: #00d9ff; cursor: pointer; font-size: 16px; line-height: 1; }
  .article-elevator-btn:hover { background: rgba(10,14,39,1); }
  [id*="overlay"], [class*="overlay"], [id*="modal"], [class*="modal"], [id*="popup"], [class*="popup"],
  [id*="paywall"], [class*="paywall"], [id*="subscribe"], [class*="subscribe"], [id*="cookie"], [class*="cookie"],
  [id*="consent"], [class*="consent"], [id*="gdpr"], [class*="gdpr"], [role="dialog"], [aria-modal="true"] {
    display: none !important;
    visibility: hidden !important;
    pointer-events: none !important;
  }
</style>
</head>
<body>
  <h1>Napkin — Documentation</h1>
  <div class="metadata">
    Source: Hacker News Show | Date: 2/19/2026 2:26:52 AM | <a href="https://github.com/ipcrm/napkin" target="_blank" rel="noopener noreferrer">Lien</a> | Lang: EN
  </div>
  <div class="content">
    <div><div> <div> <div> <p><img src="https://ipcrm.github.io/napkin/logo.svg" alt="Napkin"></p> </div> <p>From thought to diagram in seconds — entirely offline.</p> <p>A fast, local-first drawing and diagramming app built with Tauri and rough.js. Create system diagrams, flowcharts, sprint boards, and wireframes — with a hand-drawn feel. No accounts, no cloud, no tracking. Your data stays on your machine.</p> </div> <section> <h2>Examples</h2> <p>A few things you can build with Napkin.</p> <div> <div> <p><img src="https://ipcrm.github.io/napkin/example-system-architecture.png" alt="System Architecture diagram showing a 3-tier web application with clients, API gateway, services, and data stores"></p><p><strong>System Architecture</strong> <span>3-tier web app with cloud gateway, services, and data stores</span> </p> </div> <div> <p><img src="https://ipcrm.github.io/napkin/example-user-flow.png" alt="User onboarding flowchart with decision points, sign up and login paths"></p><p><strong>User Flow</strong> <span>Onboarding flowchart with decision diamonds and annotations</span> </p> </div> <div> <p><img src="https://ipcrm.github.io/napkin/example-sprint-board.png" alt="Sprint board with Backlog, In Progress, In Review, and Done columns with colored sticky notes"></p><p><strong>Sprint Board</strong> <span>Kanban board with color-coded sticky notes across 4 columns</span> </p> </div> </div> </section> <section> <h2>Features</h2> <ul> <li><strong>Instant and private</strong> — opens immediately, works offline, nothing leaves your computer</li> <li><strong>Hand-drawn feel</strong> — rough.js rendering gives diagrams a natural, sketchy look</li> <li><strong>Desktop native</strong> — built with Tauri, runs as a real app, not a browser tab</li> <li><strong>Simple file format</strong> — <code>.napkin</code> files are JSON, easy to version control or script</li> <li><strong>AI-ready</strong> — built-in MCP server lets AI agents create and edit diagrams</li> </ul> <h3>Drawing</h3> <ul> <li>13 shape types: rectangles, ellipses, triangles, diamonds, hexagons, stars, clouds, cylinders, sticky notes, lines, arrows, freehand, and text</li> <li>Lines and arrows with direct, elbow, or curved routing</li> <li>7 endpoint styles (arrow, open-arrow, triangle, circle, diamond, square, none)</li> <li>Configurable fill styles: hachure, solid, zigzag, cross-hatch, dots</li> <li>Paste images from clipboard directly onto the canvas</li> <li>Resize, rotate, snap, align, and style everything</li> <li>Smart guides: alignment lines and equal-spacing indicators when dragging shapes</li> <li>Snap to grid, object snap, and alignment hints (independently toggleable)</li> <li>Auto-layout: grid and force-directed arrangement via context menu or MCP</li> <li>Adjustable roughness (0 = clean, 3 = very sketchy)</li> </ul> <h3>Workflow</h3> <ul> <li>Multiple tabs with collection save/restore</li> <li>Undo/redo (single undo for drag, resize, and rotate gestures), copy/paste, duplicate</li> <li>Export to PNG or SVG</li> <li>Presentation mode with fullscreen and pan navigation</li> <li>Auto-save with recovery</li> <li>Native file dialogs on desktop</li> </ul> </section> <section> <h2>Getting Started</h2> <p>Download the latest build for your platform from the <a href="https://github.com/ipcrm/napkin/releases/latest">GitHub Releases</a> page:</p> <ul> <li><strong>macOS</strong> — <code>.dmg</code> (Apple Silicon and Intel)</li> <li><strong>Windows</strong> — <code>.msi</code> or <code>.exe</code></li> <li><strong>Linux</strong> — <code>.deb</code> or <code>.AppImage</code></li> </ul> <p>Want to build from source or contribute? See the <a href="https://github.com/ipcrm/napkin/blob/main/CONTRIBUTING.md">Contributing Guide</a>.</p> </section> <section> <h2>Shapes</h2> <table> <tbody><tr><th>Shape</th><th>Description</th></tr> <tr><td>Rectangle</td><td>Standard box shape</td></tr> <tr><td>Ellipse</td><td>Circle or oval</td></tr> <tr><td>Triangle</td><td>Equilateral triangle</td></tr> <tr><td>Diamond</td><td>Rotated square / rhombus</td></tr> <tr><td>Hexagon</td><td>Six-sided polygon</td></tr> <tr><td>Star</td><td>Five-pointed star</td></tr> <tr><td>Cloud</td><td>Cloud shape using bezier curves</td></tr> <tr><td>Cylinder</td><td>3D cylinder (databases, storage)</td></tr> <tr><td>Sticky Note</td><td>Colored note with text</td></tr> <tr><td>Text</td><td>Standalone text label</td></tr> <tr><td>Line</td><td>Line without arrowhead</td></tr> <tr><td>Arrow</td><td>Line with arrowhead</td></tr> <tr><td>Freehand</td><td>Freeform pencil drawing</td></tr> </tbody></table> <p>All shapes support: stroke color, fill color, fill style, opacity, rotation, roughness (0–3), and text content.</p> </section> <section> <h2>Connections</h2> <p>Lines and arrows can bind to shapes at 5 connection points: <code>top</code>, <code>right</code>, <code>bottom</code>, <code>left</code>, <code>center</code>. Bound connections follow their shapes when moved, resized, or rotated.</p> <h3>Routing modes</h3> <ul> <li><strong>Direct</strong> — straight line between endpoints</li> <li><strong>Elbow</strong> — orthogonal segments (right angles)</li> <li><strong>Curved</strong> — quadratic bezier via control points</li> </ul> </section> <section> <h2>Keyboard Shortcuts</h2> <h3>Tools</h3> <table> <tbody><tr><th>Key</th><th>Tool</th><th>Key</th><th>Tool</th></tr> <tr><td><span>V</span></td><td>Select</td><td><span>L</span></td><td>Line</td></tr> <tr><td><span>R</span></td><td>Rectangle</td><td><span>A</span></td><td>Arrow</td></tr> <tr><td><span>E</span></td><td>Ellipse</td><td><span>D</span></td><td>Freehand</td></tr> <tr><td><span>G</span></td><td>Triangle</td><td><span>T</span></td><td>Text</td></tr> <tr><td><span>I</span></td><td>Diamond</td><td><span>S</span></td><td>Sticky Note</td></tr> <tr><td><span>X</span></td><td>Hexagon</td><td><span>H</span></td><td>Pan</td></tr> <tr><td><span>P</span></td><td>Star</td><td><span>Space</span></td><td>Temp pan (hold)</td></tr> <tr><td><span>C</span></td><td>Cloud</td><td><span>Esc</span></td><td>Cancel / Select</td></tr> <tr><td><span>Y</span></td><td>Cylinder</td><td></td><td></td></tr> </tbody></table> <h3>Actions</h3> <table> <tbody><tr><th>Shortcut</th><th>Action</th></tr> <tr><td><span>Cmd</span> + <span>Z</span></td><td>Undo</td></tr> <tr><td><span>Cmd</span> + <span>Shift</span> + <span>Z</span></td><td>Redo</td></tr> <tr><td><span>Cmd</span> + <span>C</span></td><td>Copy</td></tr> <tr><td><span>Cmd</span> + <span>V</span></td><td>Paste</td></tr> <tr><td><span>Cmd</span> + <span>D</span></td><td>Duplicate</td></tr> <tr><td><span>Cmd</span> + <span>'</span></td><td>Toggle grid</td></tr> <tr><td><span>Cmd</span> + <span>Shift</span> + <span>P</span></td><td>Presentation mode</td></tr> <tr><td><span>Cmd</span> + drag</td><td>Pan canvas</td></tr> <tr><td><span>Delete</span></td><td>Delete selected</td></tr> </tbody></table> </section> <section> <h2>MCP Server</h2> <p>Napkin includes a built-in <a href="https://modelcontextprotocol.io/">Model Context Protocol</a> (MCP) server that lets AI agents — like Claude — create and manipulate diagrams programmatically. The server runs locally and bridges tool calls from an AI client through to the Napkin canvas.</p> <h3>Architecture</h3> <p>The MCP server uses a bridge pattern:</p> <ol> <li>AI client sends JSON-RPC request to <code>http://127.0.0.1:21420/mcp</code></li> <li>Rust (Axum) HTTP server receives the request</li> <li>Request is forwarded to the Svelte frontend via Tauri event</li> <li>Frontend executes the tool and returns results</li> <li>Response flows back to the AI client</li> </ol> </section> <section> <h2>MCP Setup</h2> <h3>1. Enable the server</h3> <p>In Napkin, click the <strong>Settings</strong> gear icon in the header bar, then toggle <strong>Enable MCP Server</strong>. The server listens on port <code>21420</code>. The setting persists across sessions.</p> <h3>2. Configure your AI client</h3> <p>For <strong>Claude Code</strong>, add to your <code>.claude.json</code> or project MCP settings:</p> <pre><code>{ "mcpServers": { "napkin": { "type": "url", "url": "http://127.0.0.1:21420/mcp" } }
}</code></pre> <h3>3. Use it</h3> <p>Ask Claude to "draw a diagram in Napkin" or "create a flowchart". The AI agent will use the MCP tools to create shapes, connect them, and arrange the canvas.</p> </section> <section> <h2>MCP Tool Reference</h2> <p>All tools are called via JSON-RPC <code>tools/call</code> method. 22 tools are available:</p> <code>get_canvas</code> <span>— Get full canvas state</span> <div> <p>Returns all shapes, viewport position/zoom, and group information.</p> <p><strong>Parameters:</strong> none</p> </div> <code>list_shapes</code> <span>— List shapes on the canvas</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>type</code></td><td>string?</td><td>Filter by shape type: <code>rectangle</code>, <code>ellipse</code>, <code>triangle</code>, <code>diamond</code>, <code>hexagon</code>, <code>star</code>, <code>cloud</code>, <code>cylinder</code>, <code>sticky</code>, <code>line</code>, <code>arrow</code>, <code>freedraw</code>, <code>text</code></td></tr> </tbody></table> </div> <code>get_shape</code> <span>— Get a shape by ID</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>id</code></td><td>string</td><td>Shape ID (required)</td></tr> </tbody></table> </div> <code>create_shape</code> <span>— Create a new shape</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>type</code></td><td>string</td><td>Shape type (required): <code>rectangle</code>, <code>ellipse</code>, <code>triangle</code>, <code>diamond</code>, <code>hexagon</code>, <code>star</code>, <code>cloud</code>, <code>cylinder</code>, <code>sticky</code>, <code>text</code></td></tr> <tr><td><code>x</code></td><td>number</td><td>X position (required)</td></tr> <tr><td><code>y</code></td><td>number</td><td>Y position (required)</td></tr> <tr><td><code>width</code></td><td>number?</td><td>Width (default: 200)</td></tr> <tr><td><code>height</code></td><td>number?</td><td>Height (default: 150)</td></tr> <tr><td><code>strokeColor</code></td><td>string?</td><td>Stroke color (default: #000000)</td></tr> <tr><td><code>strokeWidth</code></td><td>number?</td><td>Stroke width (default: 2)</td></tr> <tr><td><code>fillColor</code></td><td>string?</td><td>Fill color (default: transparent)</td></tr> <tr><td><code>fillStyle</code></td><td>string?</td><td><code>hachure</code>, <code>solid</code>, <code>zigzag</code>, <code>cross-hatch</code>, <code>dots</code></td></tr> <tr><td><code>strokeStyle</code></td><td>string?</td><td><code>solid</code>, <code>dashed</code>, <code>dotted</code></td></tr> <tr><td><code>opacity</code></td><td>number?</td><td>0 to 1 (default: 1)</td></tr> <tr><td><code>roughness</code></td><td>number?</td><td>0 to 3 (default: 1)</td></tr> <tr><td><code>rotation</code></td><td>number?</td><td>Degrees</td></tr> <tr><td><code>text</code></td><td>string?</td><td>Text content</td></tr> <tr><td><code>fontSize</code></td><td>number?</td><td>Font size for text shapes (default: 20)</td></tr> <tr><td><code>stickyColor</code></td><td>string?</td><td>Sticky note background color</td></tr> </tbody></table> </div> <code>update_shape</code> <span>— Update shape properties</span> <p>Pass <code>id</code> (required) plus any properties to change. Accepts the same optional properties as <code>create_shape</code>.</p> <code>delete_shape</code> <span>— Delete a shape</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>id</code></td><td>string</td><td>Shape ID to delete (required)</td></tr> </tbody></table> </div> <code>create_image</code> <span>— Add an image to the canvas</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>url</code></td><td>string</td><td>HTTP/HTTPS URL or base64 data URL (required)</td></tr> <tr><td><code>x</code></td><td>number?</td><td>X position (default: 0)</td></tr> <tr><td><code>y</code></td><td>number?</td><td>Y position (default: 0)</td></tr> <tr><td><code>width</code></td><td>number?</td><td>Width (auto-calculated if omitted)</td></tr> <tr><td><code>height</code></td><td>number?</td><td>Height (auto-calculated if omitted)</td></tr> </tbody></table> </div> <code>create_connection</code> <span>— Connect two shapes with a line or arrow</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>fromShapeId</code></td><td>string</td><td>Source shape ID (required)</td></tr> <tr><td><code>toShapeId</code></td><td>string</td><td>Target shape ID (required)</td></tr> <tr><td><code>connectionType</code></td><td>string?</td><td><code>arrow</code> (default) or <code>line</code></td></tr> <tr><td><code>routingMode</code></td><td>string?</td><td><code>direct</code> (default), <code>elbow</code>, or <code>curved</code></td></tr> <tr><td><code>text</code></td><td>string?</td><td>Label text on the connection</td></tr> <tr><td><code>strokeColor</code></td><td>string?</td><td>Line color</td></tr> <tr><td><code>strokeWidth</code></td><td>number?</td><td>Line width</td></tr> </tbody></table> <p>Connections created with this tool are <strong>bound</strong> to their source and target shapes — they stay connected when shapes are moved, resized, or rotated.</p> </div> <code>set_viewport</code> <span>— Pan and zoom the canvas</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>x</code></td><td>number?</td><td>Pan X offset</td></tr> <tr><td><code>y</code></td><td>number?</td><td>Pan Y offset</td></tr> <tr><td><code>zoom</code></td><td>number?</td><td>Zoom level (0.1 to 10)</td></tr> </tbody></table> </div> <code>select_shapes</code> <span>— Select shapes by ID</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>ids</code></td><td>string[]</td><td>Array of shape IDs (required)</td></tr> </tbody></table> </div> <code>batch_operations</code> <span>— Batch create/update/delete</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>operations</code></td><td>array</td><td>Array of <code>{ action, data }</code> objects (required)</td></tr> </tbody></table> <p>Each operation has <code>action</code> (<code>"create"</code>, <code>"update"</code>, or <code>"delete"</code>) and <code>data</code> (shape properties for create/update, or <code>{ id }</code> for delete).</p> <p><strong>Note:</strong> Use <code>create_connection</code> for arrows that need to bind to shapes. Arrows created via <code>batch_operations</code> are positioned by coordinates but not bound.</p> </div> <code>list_tabs</code> <span>— List all open tabs</span> <p><strong>Parameters:</strong> none</p> <code>create_tab</code> <span>— Create a new tab</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>title</code></td><td>string?</td><td>Tab title (default: "Untitled")</td></tr> </tbody></table> </div> <code>switch_tab</code> <span>— Switch to a tab</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>tabId</code></td><td>string</td><td>Tab ID (required)</td></tr> </tbody></table> </div> <code>rename_tab</code> <span>— Rename a tab</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>tabId</code></td><td>string</td><td>Tab ID (required)</td></tr> <tr><td><code>title</code></td><td>string</td><td>New title (required)</td></tr> </tbody></table> </div> <code>group_shapes</code> <span>— Group shapes together</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>ids</code></td><td>string[]</td><td>Shape IDs to group (minimum 2, required)</td></tr> </tbody></table> </div> <code>ungroup</code> <span>— Ungroup a shape group</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>groupId</code></td><td>string</td><td>Group ID (required)</td></tr> </tbody></table> </div> <code>clear_canvas</code> <span>— Clear all shapes</span> <p><strong>Parameters:</strong> none. Removes all shapes from the active canvas.</p> <code>bring_to_front</code> <span>— Move shape to front of z-order</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>id</code></td><td>string</td><td>Shape ID (required)</td></tr> </tbody></table> </div> <code>send_to_back</code> <span>— Move shape to back of z-order</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>id</code></td><td>string</td><td>Shape ID (required)</td></tr> </tbody></table> </div> <code>bring_forward</code> <span>— Move shape one step forward in z-order</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>id</code></td><td>string</td><td>Shape ID (required)</td></tr> </tbody></table> </div> <code>send_backward</code> <span>— Move shape one step backward in z-order</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>id</code></td><td>string</td><td>Shape ID (required)</td></tr> </tbody></table> </div> <code>reorganize</code> <span>— Auto-layout shapes on the canvas</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>algorithm</code></td><td>"grid" | "force-directed"</td><td>Layout algorithm (required)</td></tr> <tr><td><code>shapeIds</code></td><td>string[]</td><td>Shape IDs to reorganize (omit for all shapes)</td></tr> <tr><td><code>padding</code></td><td>number</td><td>Padding between shapes for grid layout (default: 40)</td></tr> <tr><td><code>iterations</code></td><td>number</td><td>Iterations for force-directed layout (default: 100)</td></tr> </tbody></table> </div> <code>set_snap_settings</code> <span>— Configure snapping behavior</span> <div> <table> <tbody><tr><th>Param</th><th>Type</th><th>Description</th></tr> <tr><td><code>snapToGrid</code></td><td>boolean</td><td>Enable/disable snap to 20px grid</td></tr> <tr><td><code>alignmentHints</code></td><td>boolean</td><td>Enable/disable alignment guide lines</td></tr> <tr><td><code>objectSnap</code></td><td>boolean</td><td>Enable/disable magnetic snap to aligned shapes</td></tr> </tbody></table> </div> </section> <section> <h2>File Format</h2> <p>Napkin saves files as <code>.napkin</code> — plain JSON that is easy to version control, diff, and script against.</p> <p>A collection file contains multiple tabs:</p> <pre><code>{ "napkin": "1.0", "documents": [ { "title": "Tab 1", "shapes": [...], "viewport": { "x": 0, "y": 0, "zoom": 1 }, "metadata": { ... } } ], "activeDocumentIndex": 0
}</code></pre> </section> <section> <h2>License</h2> <p><a href="https://github.com/ipcrm/napkin/blob/main/LICENSE">MIT</a></p> </section> </div></div>
  </div>
  <div class="article-elevator" aria-label="Navigation article">
    <button class="article-elevator-btn" type="button" onclick="scrollToTop()">▲</button>
    <button class="article-elevator-btn" type="button" onclick="scrollToBottom()">▼</button>
  </div>
  <script>
    function stripBlockingPanels() {
      const selector = '[id*="overlay"], [class*="overlay"], [id*="modal"], [class*="modal"], [id*="popup"], [class*="popup"], [id*="paywall"], [class*="paywall"], [id*="subscribe"], [class*="subscribe"], [id*="cookie"], [class*="cookie"], [id*="consent"], [class*="consent"], [id*="gdpr"], [class*="gdpr"], [role="dialog"], [aria-modal="true"]';
      const textPattern = /\b(cookie|consent|gdpr|subscribe|subscription|paywall|abonnez[-\s]?vous|inscrivez[-\s]?vous|continue reading|continuez la lecture)\b/i;
      document.querySelectorAll(selector).forEach((node) => node.remove());
      document.querySelectorAll('div, section, aside').forEach((node) => {
        const styleAttr = String(node.getAttribute('style') || '').toLowerCase();
        const classAndId = String(node.className || '').toLowerCase() + ' ' + String(node.id || '').toLowerCase();
        const text = String(node.textContent || '').slice(0, 800);
        const hasKeyword = textPattern.test(classAndId) || textPattern.test(text);
        const looksFixed = /(position\s*:\s*(fixed|sticky)|inset\s*:|top\s*:|left\s*:|right\s*:|bottom\s*:)/.test(styleAttr);
        const hasPriority = /(z-index\s*:\s*[1-9]\d{1,}|backdrop-filter|overflow\s*:\s*hidden)/.test(styleAttr);
        if (hasKeyword && (looksFixed || hasPriority)) node.remove();
      });
    }
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'auto' });
    }
    function scrollToBottom() {
      window.scrollTo({ top: document.documentElement.scrollHeight, behavior: 'auto' });
    }
    window.addEventListener('message', (event) => {
      const data = event && event.data;
      if (!data || data.type !== 'AI_PULSE_SCROLL') return;
      if (data.direction === 'up' || data.direction === 'top') scrollToTop();
      if (data.direction === 'down' || data.direction === 'bottom') scrollToBottom();
    });
    stripBlockingPanels();
    setTimeout(stripBlockingPanels, 60);
    setTimeout(stripBlockingPanels, 220);
    setTimeout(stripBlockingPanels, 650);
  </script>
</body>
</html>