<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Z2M: Bosch TRV BTH-RA not returning to previous occupied_heating_setpoint after window open/close</title>
<style>
  body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.55; color: #e2e8f0; max-width: 800px; margin: 26px auto; padding: 0 18px; background: #0a0e27; }
  h1 { color: #00d9ff; margin-bottom: 0.35em; line-height: 1.22; font-size: clamp(1.45rem, 2.1vw, 1.95rem); font-weight: 700; }
  .metadata { color: #94a3b8; font-size: 0.86em; margin-bottom: 1.2em; border-bottom: 1px solid rgba(0,217,255,0.2); padding-bottom: 0.7em; }
  p { margin-bottom: 0.72em; line-height: 1.58; }
  img { max-width: 100%; width: auto !important; height: auto !important; object-fit: contain !important; border-radius: 8px; display: block; margin: 0.6em auto; }
  a { color: #00d9ff; }
  .article-elevator { position: fixed; right: 14px; bottom: 14px; display: flex; flex-direction: column; gap: 8px; z-index: 9999; }
  .article-elevator-btn { width: 36px; height: 36px; border: 1px solid rgba(0,217,255,0.35); border-radius: 10px; background: rgba(10,14,39,0.88); color: #00d9ff; cursor: pointer; font-size: 16px; line-height: 1; }
  .article-elevator-btn:hover { background: rgba(10,14,39,1); }
  [id*="overlay"], [class*="overlay"], [id*="modal"], [class*="modal"], [id*="popup"], [class*="popup"],
  [id*="paywall"], [class*="paywall"], [id*="subscribe"], [class*="subscribe"], [id*="cookie"], [class*="cookie"],
  [id*="consent"], [class*="consent"], [id*="gdpr"], [class*="gdpr"], [role="dialog"], [aria-modal="true"] {
    display: none !important;
    visibility: hidden !important;
    pointer-events: none !important;
  }
</style>
</head>
<body>
  <h1>Z2M: Bosch TRV BTH-RA not returning to previous occupied_heating_setpoint after window open/close</h1>
  <div class="metadata">
    Source: Home Assistant Community Forum (Latest) | Date: 2/28/2026 2:49:53 PM | <a href="https://community.home-assistant.io/t/z2m-bosch-trv-bth-ra-not-returning-to-previous-occupied-heating-setpoint-after-window-open-close/991455" target="_blank" rel="noopener noreferrer">Lien</a> | Lang: EN
  </div>
  <div class="content">
    <p><p>I’m currently facing issues with my Bosch TRV <a href="https://www.zigbee2mqtt.io/devices/BTH-RA.html" rel="noopener nofollow ugc">BTH-RA (RBSH-TRV1-ZB-EU)</a> following a recent migration from ZHA to Zigbee2MQTT, which also included an OTA update to version 318927168.<br>
App: 1.3 build 2 | Stack: 7.1 build 64 on named devices.<br>
I suspect this may be a firmware issue. However, since my experience with Zigbee2MQTT is quite limited, community feedback would be greatly appreciated.<br>
Also I’m having trouble to revert back to previous firmware which would help to track down the issue, so if there are any suggestions on this matter feel free to reach out to me.</p>
<h3><a name="p-3765244-issue-description-1" class="anchor" href="https://community.home-assistant.io#p-3765244-issue-description-1"></a>Issue Description</h3>
<p>The TRV <code>occupied_heating_setpoint</code> randomly does not return to its previous value after a window open/close cycle.</p>
<h3><a name="p-3765244-expected-behavior-2" class="anchor" href="https://community.home-assistant.io#p-3765244-expected-behavior-2"></a>Expected Behavior</h3>
<p><code>occupied_heating_setpoint</code> should return to its previous value as soon as the <code>window_detection</code> switch toggles from <strong>“off”</strong> to <strong>“on”</strong>.</p>
<h3><a name="p-3765244-actual-behavior-3" class="anchor" href="https://community.home-assistant.io#p-3765244-actual-behavior-3"></a>Actual Behavior</h3>
<p><code>occupied_heating_setpoint</code> occasionally remains at a value of 8.0.</p>
<h3><a name="p-3765244-relevant-z2m-log-entries-error-case-4" class="anchor" href="https://community.home-assistant.io#p-3765244-relevant-z2m-log-entries-error-case-4"></a>Relevant z2m log entries (error case):</h3>
<h4><a name="p-3765244-set-occupied_heating_setpoint-to-215-via-ha-5" class="anchor" href="https://community.home-assistant.io#p-3765244-set-occupied_heating_setpoint-to-215-via-ha-5"></a>set occupied_heating_setpoint to 21.5 via HA</h4>
<pre><code class="lang-auto">[2026-02-28 14:08:22] debug: z2m:mqtt: Received MQTT message on 'zigbee2mqtt/TRV BZ/set/occupied_heating_setpoint' with data '21.5'
[2026-02-28 14:08:22] debug: z2m: Publishing 'set' 'occupied_heating_setpoint' to 'TRV BZ'
[2026-02-28 14:08:24] info: z2m:mqtt: MQTT publish: topic 'zigbee2mqtt/TRV BZ', payload '{"automatic_valve_adapt":false,"battery":78,"battery_low":true,"boost_heating":"OFF","child_lock":"LOCK","display_brightness":70,"display_orientation":"standard_arrangement","display_switch_on_duration":10,"displayed_temperature":"set_temperature","error_state":"ok","linkquality":200,"local_temperature":20.5,"local_temperature_calibration":0,"occupied_heating_setpoint":21.5,"operating_mode":"manual","pi_heating_demand":0,"remote_temperature":20.51,"running_state":"idle","setpoint_change_source":"externally","system_mode":"heat","update":{"installed_version":318927168,"latest_release_notes":"New heating algorithm (like that used on the non-matter radiator thermostat II since November 2024)","latest_source":"https://raw.githubusercontent.com/Koenkk/zigbee-OTA/master/images/Bosch/TRV_GEN2_DUAL_0x13027140_PROD.fw","latest_version":318927168,"state":"idle"},"valve_adapt_process":null,"valve_adapt_status":"success","window_detection":"OFF"}'
[2026-02-28 14:08:24] debug: z2m: Received Zigbee message from 'TRV BZ', type 'attributeReport', cluster 'hvacThermostat', data '{"occupiedHeatingSetpoint":2150}' from endpoint 1 with groupID 0
[2026-02-28 14:08:24] info: z2m:mqtt: MQTT publish: topic 'zigbee2mqtt/TRV BZ', payload '{"automatic_valve_adapt":false,"battery":78,"battery_low":true,"boost_heating":"OFF","child_lock":"LOCK","display_brightness":70,"display_orientation":"standard_arrangement","display_switch_on_duration":10,"displayed_temperature":"set_temperature","error_state":"ok","linkquality":200,"local_temperature":20.5,"local_temperature_calibration":0,"occupied_heating_setpoint":21.5,"operating_mode":"manual","pi_heating_demand":0,"remote_temperature":20.51,"running_state":"idle","setpoint_change_source":"externally","system_mode":"heat","update":{"installed_version":318927168,"latest_release_notes":"New heating algorithm (like that used on the non-matter radiator thermostat II since November 2024)","latest_source":"https://raw.githubusercontent.com/Koenkk/zigbee-OTA/master/images/Bosch/TRV_GEN2_DUAL_0x13027140_PROD.fw","latest_version":318927168,"state":"idle"},"valve_adapt_process":null,"valve_adapt_status":"success","window_detection":"OFF"}'
</code></pre>
<h4><a name="p-3765244-trigger-window-open-through-ha-automation-6" class="anchor" href="https://community.home-assistant.io#p-3765244-trigger-window-open-through-ha-automation-6"></a>trigger window open through ha automation</h4>
<pre><code class="lang-auto">[2026-02-28 14:08:53] debug: z2m:mqtt: Received MQTT message on 'zigbee2mqtt/TRV BZ/set/window_detection' with data 'ON'
[2026-02-28 14:08:53] debug: z2m: Publishing 'set' 'window_detection' to 'TRV BZ'
[2026-02-28 14:08:57] info: z2m:mqtt: MQTT publish: topic 'zigbee2mqtt/TRV BZ', payload '{"automatic_valve_adapt":false,"battery":78,"battery_low":true,"boost_heating":"OFF","child_lock":"LOCK","display_brightness":70,"display_orientation":"standard_arrangement","display_switch_on_duration":10,"displayed_temperature":"set_temperature","error_state":"ok","linkquality":192,"local_temperature":20.5,"local_temperature_calibration":0,"occupied_heating_setpoint":21.5,"operating_mode":"manual","pi_heating_demand":0,"remote_temperature":20.51,"running_state":"idle","setpoint_change_source":"externally","system_mode":"heat","update":{"installed_version":318927168,"latest_release_notes":"New heating algorithm (like that used on the non-matter radiator thermostat II since November 2024)","latest_source":"https://raw.githubusercontent.com/Koenkk/zigbee-OTA/master/images/Bosch/TRV_GEN2_DUAL_0x13027140_PROD.fw","latest_version":318927168,"state":"idle"},"valve_adapt_process":null,"valve_adapt_status":"success","window_detection":"ON"}'
[2026-02-28 14:08:57] debug: z2m: Received Zigbee message from 'TRV BZ', type 'attributeReport', cluster 'hvacThermostat', data '{"windowOpenMode":1}' from endpoint 1 with groupID 0
[2026-02-28 14:08:57] info: z2m:mqtt: MQTT publish: topic 'zigbee2mqtt/TRV BZ', payload '{"automatic_valve_adapt":false,"battery":78,"battery_low":true,"boost_heating":"OFF","child_lock":"LOCK","display_brightness":70,"display_orientation":"standard_arrangement","display_switch_on_duration":10,"displayed_temperature":"set_temperature","error_state":"ok","linkquality":192,"local_temperature":20.5,"local_temperature_calibration":0,"occupied_heating_setpoint":21.5,"operating_mode":"manual","pi_heating_demand":0,"remote_temperature":20.51,"running_state":"idle","setpoint_change_source":"externally","system_mode":"heat","update":{"installed_version":318927168,"latest_release_notes":"New heating algorithm (like that used on the non-matter radiator thermostat II since November 2024)","latest_source":"https://raw.githubusercontent.com/Koenkk/zigbee-OTA/master/images/Bosch/TRV_GEN2_DUAL_0x13027140_PROD.fw","latest_version":318927168,"state":"idle"},"valve_adapt_process":null,"valve_adapt_status":"success","window_detection":"ON"}'
[2026-02-28 14:08:57] debug: z2m: Received Zigbee message from 'TRV BZ', type 'attributeReport', cluster 'hvacThermostat', data '{"occupiedHeatingSetpoint":800}' from endpoint 1 with groupID 0
[2026-02-28 14:08:57] info: z2m:mqtt: MQTT publish: topic 'zigbee2mqtt/TRV BZ', payload '{"automatic_valve_adapt":false,"battery":78,"battery_low":true,"boost_heating":"OFF","child_lock":"LOCK","display_brightness":70,"display_orientation":"standard_arrangement","display_switch_on_duration":10,"displayed_temperature":"set_temperature","error_state":"ok","linkquality":192,"local_temperature":20.5,"local_temperature_calibration":0,"occupied_heating_setpoint":8,"operating_mode":"manual","pi_heating_demand":0,"remote_temperature":20.51,"running_state":"idle","setpoint_change_source":"externally","system_mode":"heat","update":{"installed_version":318927168,"latest_release_notes":"New heating algorithm (like that used on the non-matter radiatorthermostat II since November 2024)","latest_source":"https://raw.githubusercontent.com/Koenkk/zigbee-OTA/master/images/Bosch/TRV_GEN2_DUAL_0x13027140_PROD.fw","latest_version":318927168,"state":"idle"},"valve_adapt_process":null,"valve_adapt_status":"success","window_detection":"ON"}'
</code></pre>
<h4><a name="p-3765244-trigger-window-close-through-ha-automation-7" class="anchor" href="https://community.home-assistant.io#p-3765244-trigger-window-close-through-ha-automation-7"></a>trigger window close through ha automation</h4>
<pre><code class="lang-auto">[2026-02-28 14:09:12] debug: z2m:mqtt: Received MQTT message on 'zigbee2mqtt/TRV BZ/set/window_detection' with data 'OFF'
[2026-02-28 14:09:12] debug: z2m: Publishing 'set' 'window_detection' to 'TRV BZ'
[2026-02-28 14:09:16] info: z2m:mqtt: MQTT publish: topic 'zigbee2mqtt/TRV BZ', payload '{"automatic_valve_adapt":false,"battery":78,"battery_low":true,"boost_heating":"OFF","child_lock":"LOCK","display_brightness":70,"display_orientation":"standard_arrangement","display_switch_on_duration":10,"displayed_temperature":"set_temperature","error_state":"ok","linkquality":200,"local_temperature":20.5,"local_temperature_calibration":0,"occupied_heating_setpoint":8,"operating_mode":"manual","pi_heating_demand":0,"remote_temperature":20.51,"running_state":"idle","setpoint_change_source":"externally","system_mode":"heat","update":{"installed_version":318927168,"latest_release_notes":"New heating algorithm (like that used on the non-matter radiatorthermostat II since November 2024)","latest_source":"https://raw.githubusercontent.com/Koenkk/zigbee-OTA/master/images/Bosch/TRV_GEN2_DUAL_0x13027140_PROD.fw","latest_version":318927168,"state":"idle"},"valve_adapt_process":null,"valve_adapt_status":"success","window_detection":"OFF"}'
[2026-02-28 14:09:16] debug: z2m: Received Zigbee message from 'TRV BZ', type 'attributeReport', cluster 'hvacThermostat', data '{"windowOpenMode":0}' from endpoint 1 with groupID 0
[2026-02-28 14:09:16] info: z2m:mqtt: MQTT publish: topic 'zigbee2mqtt/TRV BZ', payload '{"automatic_valve_adapt":false,"battery":78,"battery_low":true,"boost_heating":"OFF","child_lock":"LOCK","display_brightness":70,"display_orientation":"standard_arrangement","display_switch_on_duration":10,"displayed_temperature":"set_temperature","error_state":"ok","linkquality":196,"local_temperature":20.5,"local_temperature_calibration":0,"occupied_heating_setpoint":8,"operating_mode":"manual","pi_heating_demand":0,"remote_temperature":20.51,"running_state":"idle","setpoint_change_source":"externally","system_mode":"heat","update":{"installed_version":318927168,"latest_release_notes":"New heating algorithm (like that used on the non-matter radiatorthermostat II since November 2024)","latest_source":"https://raw.githubusercontent.com/Koenkk/zigbee-OTA/master/images/Bosch/TRV_GEN2_DUAL_0x13027140_PROD.fw","latest_version":318927168,"state":"idle"},"valve_adapt_process":null,"valve_adapt_status":"success","window_detection":"OFF"}'
</code></pre>
<h4><a name="p-3765244-notice-the-missing-attributereport-for-cluster-hvacthermostat-containing-the-occupiedheatingsetpoint-value-data-in-between-8" class="anchor" href="https://community.home-assistant.io#p-3765244-notice-the-missing-attributereport-for-cluster-hvacthermostat-containing-the-occupiedheatingsetpoint-value-data-in-between-8"></a>Notice the missing ‘attributeReport’ for cluster ‘hvacThermostat’ containing the occupiedHeatingSetpoint value data in between</h4>
<pre><code class="lang-auto">[2026-02-28 14:09:51] debug: z2m:mqtt: Received MQTT message on 'zigbee2mqtt/TRV BZ/set/remote_temperature' with data '20.61'
[2026-02-28 14:09:51] debug: z2m: Publishing 'set' 'remote_temperature' to 'TRV BZ'
</code></pre>
<h3><a name="p-3765244-relevant-z2m-log-entries-error-free-case-9" class="anchor" href="https://community.home-assistant.io#p-3765244-relevant-z2m-log-entries-error-free-case-9"></a>Relevant z2m log entries (error-free case):</h3>
<h4><a name="p-3765244-set-occupied_heating_setpoint-to-210-10" class="anchor" href="https://community.home-assistant.io#p-3765244-set-occupied_heating_setpoint-to-210-10"></a>set occupied_heating_setpoint to 21.0</h4>
<pre><code class="lang-auto">[2026-02-28 14:40:04] debug: z2m:mqtt: Received MQTT message on 'zigbee2mqtt/TRV BZ/set/occupied_heating_setpoint' with data '21.0'
[2026-02-28 14:40:04] debug: z2m: Publishing 'set' 'occupied_heating_setpoint' to 'TRV BZ'
[2026-02-28 14:40:08] info: z2m:mqtt: MQTT publish: topic 'zigbee2mqtt/TRV BZ', payload '{"automatic_valve_adapt":false,"battery":78,"battery_low":true,"boost_heating":"OFF","child_lock":"LOCK","display_brightness":70,"display_orientation":"standard_arrangement","display_switch_on_duration":10,"displayed_temperature":"set_temperature","error_state":"ok","linkquality":192,"local_temperature":20.3,"local_temperature_calibration":0,"occupied_heating_setpoint":21,"operating_mode":"manual","pi_heating_demand":0,"remote_temperature":20.4,"running_state":"idle","setpoint_change_source":"externally","system_mode":"heat","update":{"installed_version":318927168,"latest_release_notes":"New heating algorithm (like that used on the non-matter radiatorthermostat II since November 2024)","latest_source":"https://raw.githubusercontent.com/Koenkk/zigbee-OTA/master/images/Bosch/TRV_GEN2_DUAL_0x13027140_PROD.fw","latest_version":318927168,"state":"idle"},"valve_adapt_process":null,"valve_adapt_status":"success","window_detection":"OFF"}'
[2026-02-28 14:40:08] debug: z2m: Received Zigbee message from 'TRV BZ', type 'attributeReport', cluster 'hvacThermostat', data '{"occupiedHeatingSetpoint":2100}' from endpoint 1 with groupID 0
</code></pre>
<h4><a name="p-3765244-trigger-window-open-through-ha-automation-11" class="anchor" href="https://community.home-assistant.io#p-3765244-trigger-window-open-through-ha-automation-11"></a>trigger window open through ha automation</h4>
<pre><code class="lang-auto">[2026-02-28 14:40:18] debug: z2m:mqtt: Received MQTT message on 'zigbee2mqtt/TRV BZ/set/window_detection' with data 'ON'
[2026-02-28 14:40:18] debug: z2m: Publishing 'set' 'window_detection' to 'TRV BZ'
[2026-02-28 14:40:19] info: z2m:mqtt: MQTT publish: topic 'zigbee2mqtt/TRV BZ', payload '{"automatic_valve_adapt":false,"battery":78,"battery_low":true,"boost_heating":"OFF","child_lock":"LOCK","display_brightness":70,"display_orientation":"standard_arrangement","display_switch_on_duration":10,"displayed_temperature":"set_temperature","error_state":"ok","linkquality":204,"local_temperature":20.3,"local_temperature_calibration":0,"occupied_heating_setpoint":21,"operating_mode":"manual","pi_heating_demand":0,"remote_temperature":20.4,"running_state":"idle","setpoint_change_source":"externally","system_mode":"heat","update":{"installed_version":318927168,"latest_release_notes":"New heating algorithm (like that used on the non-matter radiatorthermostat II since November 2024)","latest_source":"https://raw.githubusercontent.com/Koenkk/zigbee-OTA/master/images/Bosch/TRV_GEN2_DUAL_0x13027140_PROD.fw","latest_version":318927168,"state":"idle"},"valve_adapt_process":null,"valve_adapt_status":"success","window_detection":"ON"}'
[2026-02-28 14:40:19] debug: z2m: Received Zigbee message from 'TRV BZ', type 'attributeReport', cluster 'hvacThermostat', data '{"windowOpenMode":1}' from endpoint 1 with groupID 0
[2026-02-28 14:40:19] info: z2m:mqtt: MQTT publish: topic 'zigbee2mqtt/TRV BZ', payload '{"automatic_valve_adapt":false,"battery":78,"battery_low":true,"boost_heating":"OFF","child_lock":"LOCK","display_brightness":70,"display_orientation":"standard_arrangement","display_switch_on_duration":10,"displayed_temperature":"set_temperature","error_state":"ok","linkquality":208,"local_temperature":20.3,"local_temperature_calibration":0,"occupied_heating_setpoint":21,"operating_mode":"manual","pi_heating_demand":0,"remote_temperature":20.4,"running_state":"idle","setpoint_change_source":"externally","system_mode":"heat","update":{"installed_version":318927168,"latest_release_notes":"New heating algorithm (like that used on the non-matter radiatorthermostat II since November 2024)","latest_source":"https://raw.githubusercontent.com/Koenkk/zigbee-OTA/master/images/Bosch/TRV_GEN2_DUAL_0x13027140_PROD.fw","latest_version":318927168,"state":"idle"},"valve_adapt_process":null,"valve_adapt_status":"success","window_detection":"ON"}'
[2026-02-28 14:40:19] debug: z2m: Received Zigbee message from 'TRV BZ', type 'attributeReport', cluster 'hvacThermostat', data '{"occupiedHeatingSetpoint":800}' from endpoint 1 with groupID 0
[2026-02-28 14:40:19] info: z2m:mqtt: MQTT publish: topic 'zigbee2mqtt/TRV BZ', payload '{"automatic_valve_adapt":false,"battery":78,"battery_low":true,"boost_heating":"OFF","child_lock":"LOCK","display_brightness":70,"display_orientation":"standard_arrangement","display_switch_on_duration":10,"displayed_temperature":"set_temperature","error_state":"ok","linkquality":204,"local_temperature":20.3,"local_temperature_calibration":0,"occupied_heating_setpoint":8,"operating_mode":"manual","pi_heating_demand":0,"remote_temperature":20.4,"running_state":"idle","setpoint_change_source":"externally","system_mode":"heat","update":{"installed_version":318927168,"latest_release_notes":"New heating algorithm (like that used on the non-matter radiator thermostat II since November 2024)","latest_source":"https://raw.githubusercontent.com/Koenkk/zigbee-OTA/master/images/Bosch/TRV_GEN2_DUAL_0x13027140_PROD.fw","latest_version":318927168,"state":"idle"},"valve_adapt_process":null,"valve_adapt_status":"success","window_detection":"ON"}'
</code></pre>
<h4><a name="p-3765244-trigger-window-close-through-ha-automation-12" class="anchor" href="https://community.home-assistant.io#p-3765244-trigger-window-close-through-ha-automation-12"></a>trigger window close through ha automation</h4>
<pre><code class="lang-auto">[2026-02-28 14:40:29] debug: z2m:mqtt: Received MQTT message on 'zigbee2mqtt/TRV BZ/set/window_detection' with data 'OFF'
[2026-02-28 14:40:29] debug: z2m: Publishing 'set' 'window_detection' to 'TRV BZ'
[2026-02-28 14:40:29] info: z2m:mqtt: MQTT publish: topic 'zigbee2mqtt/TRV BZ', payload '{"automatic_valve_adapt":false,"battery":78,"battery_low":true,"boost_heating":"OFF","child_lock":"LOCK","display_brightness":70,"display_orientation":"standard_arrangement","display_switch_on_duration":10,"displayed_temperature":"set_temperature","error_state":"ok","linkquality":196,"local_temperature":20.3,"local_temperature_calibration":0,"occupied_heating_setpoint":8,"operating_mode":"manual","pi_heating_demand":0,"remote_temperature":20.4,"running_state":"idle","setpoint_change_source":"externally","system_mode":"heat","update":{"installed_version":318927168,"latest_release_notes":"New heating algorithm (like that used on the non-matter radiator thermostat II since November 2024)","latest_source":"https://raw.githubusercontent.com/Koenkk/zigbee-OTA/master/images/Bosch/TRV_GEN2_DUAL_0x13027140_PROD.fw","latest_version":318927168,"state":"idle"},"valve_adapt_process":null,"valve_adapt_status":"success","window_detection":"OFF"}'
[2026-02-28 14:40:29] debug: z2m: Received Zigbee message from 'TRV BZ', type 'attributeReport', cluster 'hvacThermostat', data '{"windowOpenMode":0}' from endpoint 1 with groupID 0
[2026-02-28 14:40:29] info: z2m:mqtt: MQTT publish: topic 'zigbee2mqtt/TRV BZ', payload '{"automatic_valve_adapt":false,"battery":78,"battery_low":true,"boost_heating":"OFF","child_lock":"LOCK","display_brightness":70,"display_orientation":"standard_arrangement","display_switch_on_duration":10,"displayed_temperature":"set_temperature","error_state":"ok","linkquality":196,"local_temperature":20.3,"local_temperature_calibration":0,"occupied_heating_setpoint":8,"operating_mode":"manual","pi_heating_demand":0,"remote_temperature":20.4,"running_state":"idle","setpoint_change_source":"externally","system_mode":"heat","update":{"installed_version":318927168,"latest_release_notes":"New heating algorithm (like that used on the non-matter radiator thermostat II since November 2024)","latest_source":"https://raw.githubusercontent.com/Koenkk/zigbee-OTA/master/images/Bosch/TRV_GEN2_DUAL_0x13027140_PROD.fw","latest_version":318927168,"state":"idle"},"valve_adapt_process":null,"valve_adapt_status":"success","window_detection":"OFF"}'
**** [2026-02-28 14:40:29] debug: z2m: Received Zigbee message from 'TRV BZ', type 'attributeReport', cluster 'hvacThermostat', data '{"occupiedHeatingSetpoint":2100}' from endpoint 1 with groupID 0 ****
[2026-02-28 14:40:29] info: z2m:mqtt: MQTT publish: topic 'zigbee2mqtt/TRV BZ', payload '{"automatic_valve_adapt":false,"battery":78,"battery_low":true,"boost_heating":"OFF","child_lock":"LOCK","display_brightness":70,"display_orientation":"standard_arrangement","display_switch_on_duration":10,"displayed_temperature":"set_temperature","error_state":"ok","linkquality":200,"local_temperature":20.3,"local_temperature_calibration":0,"occupied_heating_setpoint":21,"operating_mode":"manual","pi_heating_demand":0,"remote_temperature":20.4,"running_state":"idle","setpoint_change_source":"externally","system_mode":"heat","update":{"installed_version":318927168,"latest_release_notes":"New heating algorithm (like that used on the non-matter radiatorthermostat II since November 2024)","latest_source":"https://raw.githubusercontent.com/Koenkk/zigbee-OTA/master/images/Bosch/TRV_GEN2_DUAL_0x13027140_PROD.fw","latest_version":318927168,"state":"idle"},"valve_adapt_process":null,"valve_adapt_status":"success","window_detection":"OFF"}'
</code></pre> <p><small>1 post - 1 participant</small></p> <p><a href="https://community.home-assistant.io/t/z2m-bosch-trv-bth-ra-not-returning-to-previous-occupied-heating-setpoint-after-window-open-close/991455">Read full topic</a></p></p>
  </div>
  <div class="article-elevator" aria-label="Navigation article">
    <button class="article-elevator-btn" type="button" onclick="history.back()" title="Retour">←</button>
    <button class="article-elevator-btn" type="button" onclick="scrollToTop()">▲</button>
    <button class="article-elevator-btn" type="button" onclick="scrollToBottom()">▼</button>
  </div>
  <script>
    function stripBlockingPanels() {
      const selector = '[id*="overlay"], [class*="overlay"], [id*="modal"], [class*="modal"], [id*="popup"], [class*="popup"], [id*="paywall"], [class*="paywall"], [id*="subscribe"], [class*="subscribe"], [id*="cookie"], [class*="cookie"], [id*="consent"], [class*="consent"], [id*="gdpr"], [class*="gdpr"], [role="dialog"], [aria-modal="true"]';
      const textPattern = /\b(cookie|consent|gdpr|subscribe|subscription|paywall|abonnez[-\s]?vous|inscrivez[-\s]?vous|continue reading|continuez la lecture|connexion|login|register|inscription|abonnement|premium|subscriber|compte|account|se connecter|sign in|sign up)\b/i;
      document.querySelectorAll(selector).forEach((node) => node.remove());
      document.querySelectorAll('div, section, aside, header, footer, nav').forEach((node) => {
        const styleAttr = String(node.getAttribute('style') || '').toLowerCase();
        const classAndId = String(node.className || '').toLowerCase() + ' ' + String(node.id || '').toLowerCase();
        const text = String(node.textContent || '').slice(0, 1200);
        const hasKeyword = textPattern.test(classAndId) || textPattern.test(text);
        const looksFixed = /(position\s*:\s*(fixed|sticky)|inset\s*:|top\s*:|left\s*:|right\s*:|bottom\s*:)/.test(styleAttr);
        const hasPriority = /(z-index\s*:\s*[1-9]\d{1,}|backdrop-filter|overflow\s*:\s*hidden)/.test(styleAttr);
        if (hasKeyword && (looksFixed || hasPriority)) node.remove();
      });
    }
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'auto' });
    }
    function scrollToBottom() {
      window.scrollTo({ top: document.documentElement.scrollHeight, behavior: 'auto' });
    }
    window.addEventListener('message', (event) => {
      const data = event && event.data;
      if (!data || data.type !== 'AI_PULSE_SCROLL') return;
      if (data.direction === 'up' || data.direction === 'top') scrollToTop();
      if (data.direction === 'down' || data.direction === 'bottom') scrollToBottom();
    });
    stripBlockingPanels();
    setTimeout(stripBlockingPanels, 60);
    setTimeout(stripBlockingPanels, 220);
    setTimeout(stripBlockingPanels, 650);
  </script>
</body>
</html>