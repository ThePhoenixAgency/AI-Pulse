<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Connexion clé SMLIGHT à Zigbee2Mqtt sur Gladys (Full SSL/TLS) (MQTT et Z2M externe)</title>
<style>
  body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.55; color: #e2e8f0; max-width: 800px; margin: 26px auto; padding: 0 18px; background: #0a0e27; }
  h1 { color: #00d9ff; margin-bottom: 0.35em; line-height: 1.22; font-size: clamp(1.45rem, 2.1vw, 1.95rem); font-weight: 700; }
  .metadata { color: #94a3b8; font-size: 0.86em; margin-bottom: 1.2em; border-bottom: 1px solid rgba(0,217,255,0.2); padding-bottom: 0.7em; }
  p { margin-bottom: 0.72em; line-height: 1.58; }
  img { max-width: 100%; width: auto !important; height: auto !important; object-fit: contain !important; border-radius: 8px; display: block; margin: 0.6em auto; }
  a { color: #00d9ff; }
  .article-elevator { position: fixed; right: 14px; bottom: 14px; display: flex; flex-direction: column; gap: 8px; z-index: 9999; }
  .article-elevator-btn { width: 36px; height: 36px; border: 1px solid rgba(0,217,255,0.35); border-radius: 10px; background: rgba(10,14,39,0.88); color: #00d9ff; cursor: pointer; font-size: 16px; line-height: 1; }
  .article-elevator-btn:hover { background: rgba(10,14,39,1); }
  [id*="overlay"], [class*="overlay"], [id*="modal"], [class*="modal"], [id*="popup"], [class*="popup"],
  [id*="paywall"], [class*="paywall"], [id*="subscribe"], [class*="subscribe"], [id*="cookie"], [class*="cookie"],
  [id*="consent"], [class*="consent"], [id*="gdpr"], [class*="gdpr"], [role="dialog"], [aria-modal="true"] {
    display: none !important;
    visibility: hidden !important;
    pointer-events: none !important;
  }
</style>
</head>
<body>
  <h1>Connexion clé SMLIGHT à Zigbee2Mqtt sur Gladys (Full SSL/TLS) (MQTT et Z2M externe)</h1>
  <div class="metadata">
    Source: Gladys Assistant (Forum) | Date: 2/22/2026 1:27:40 PM | <a href="https://community.gladysassistant.com/t/connexion-cle-smlight-a-zigbee2mqtt-sur-gladys-full-ssl-tls-mqtt-et-z2m-externe/10041" target="_blank" rel="noopener noreferrer">Lien</a> | Lang: FR
  </div>
  <div class="content">
    <p><p>Bonjour,</p>
<p>Comme promis, voici un tutoriel afin de connecter une clé SMLIGHT à Gladys via le réseau et non via USB car sinon on perd tout l’intérêt de cette clé en la branchant en USB <img src="https://gladys-assistant-community.b-cdn.net/images/emoji/apple/blush.png?v=15" title=":blush:" class="emoji" alt=":blush:" loading="lazy" width="20" height="20"></p>
<p>Gladys ne prenant en charge que le mode USB <a class="mention" href="https://community.gladysassistant.com/u/pierre-gilles">@pierre-gilles</a> arrête moi si je me trompe <img src="https://gladys-assistant-community.b-cdn.net/images/emoji/apple/upside_down_face.png?v=15" title=":upside_down_face:" class="emoji" alt=":upside_down_face:" loading="lazy" width="20" height="20">, je suis partie sur une installation avec un MQTT et Z2M externe à Gladys.<br>
Cela pourrait peut-être faire l’objet d’une demande de fonctionnalité, qu’en penses-tu <a class="mention" href="https://community.gladysassistant.com/u/pierre-gilles">@pierre-gilles</a> ?</p>
<p>Ici pour z2m en https j’utilise le port 443 mais pour éviter tout conflit si vous décider de tout installer sur la même machine il faudrait modifier par le port 4343 par exemple <img src="https://gladys-assistant-community.b-cdn.net/images/emoji/apple/slight_smile.png?v=15" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p>
<p>J’avais déjà fais un tuto complet sur HAOS à l’époque ou je l’utilisais que vous pouvez retrouver ici :</p><aside class="onebox discoursetopic" data-onebox-src="https://forum.hacf.fr/t/tuto-installer-haos-sur-proxmox-avec-z2m-et-mqtt-full-ssl-tls-lets-encrypt/24467"> <header class="source"> <img src="https://forum.hacf.fr/uploads/default/optimized/1X/0f657622af66788adb453e3b8dfb0089e7b9a05e_2_32x32.png" class="site-icon" alt="" width="32" height="32"> <a href="https://forum.hacf.fr/t/tuto-installer-haos-sur-proxmox-avec-z2m-et-mqtt-full-ssl-tls-lets-encrypt/24467" target="_blank" rel="noopener" title="09:58PM - 29 May 2025">Home Assistant Communauté Francophone – 29 May 25</a> </header> <article class="onebox-body"> <div class="aspect-image" style="--aspect-ratio:427/500;"><img src="https://forum.hacf.fr/uploads/default/original/3X/1/a/1a743a9b1634a75db234f97260c6dc961e5015f9.png" class="thumbnail" width="427" height="500"></div> <div class="title-wrapper"> <h3><a href="https://forum.hacf.fr/t/tuto-installer-haos-sur-proxmox-avec-z2m-et-mqtt-full-ssl-tls-lets-encrypt/24467" target="_blank" rel="noopener">[Tuto] Installer HAOS sur Proxmox avec Z2M et MQTT (Full SSL/TLS - Lets Encrypt)</a></h3> <div class="topic-category"> <span class="badge-wrapper bullet"> <span class="badge-category-bg" style="background-color: #3AB54A;"></span> <span class="badge-category clear-badge"> <span class="category-name">Home Assistant - Tutoriels &amp; Partages</span> </span> </span> <span class="badge-wrapper bullet"> <span class="badge-category-bg" style="background-color: #3AB54A;"></span> <span class="badge-category clear-badge"> <span class="category-name">Installation</span> </span> </span> <div class="topic-header-extra"> <div class="list-tags"> <div class="discourse-tags"> <svg class="fa d-icon d-icon-tag svg-icon svg-string"><use href="#tag"></use></svg> <span class="discourse-tag simple">tutoriel</span> </div> </div> </div> </div>
</div> <p>L’idée de ce tutoriel est de regrouper un peu toutes les infos que j’ai pu trouver pour l’installation de HAOS, Z2M et MQTT sur des VM séparés au sein de Proxmox et le tout en full SSL/TLS (Lets encrypt) sur ce type de machine : ...</p> <p> <span class="label1">Temps de lecture: 7 mins </span> <span class="label2">J'aime: 15 </span> </p> </article> <div class="onebox-metadata"> </div> <div style="clear: both"></div>
</aside> <p><strong>Installation Mosquitto (Mqtt)</strong></p>
<p>Installer une VM sous ubuntu 24.04, mettez la complétement à jour et lancez les commandes suivantes :</p>
<p>Pour installer docker :</p>
<pre><code class="lang-auto">curl -sSL https://get.docker.com/ | CHANNEL=stable sh
systemctl enable --now docker
</code></pre>
<p>Ajouter un utilisateur docker_mosquitto par exemple :</p>
<pre><code class="lang-auto">adduser docker_mosquitto
</code></pre>
<p>Récuperer son ID : (Ici 1002)</p>
<pre><code class="lang-auto">cat /etc/passwd [ grep docker_mosquitto
</code></pre>
<p><img src="https://gladys-assistant-community.b-cdn.net/uploads/default/original/3X/9/4/942810aad326887315921dd330e89709bbc9f45a.png" alt="image" data-base62-sha1="l8Evi9fiVZymo5kfNJDStmN34Ey" width="645" height="56"></p>
<p>Créer le dossier mosquitto dans /opt</p>
<pre><code class="lang-auto">mkdir /opt/mosquitto
</code></pre>
<p>Créer le fichier docker-compose.yml avec le contenu suivant : (Remplacer 1002 par les ID que l’on a récupéré juste avant)</p>
<pre><code class="lang-auto">services: mosquitto: image: eclipse-mosquitto:2.0.22 container_name: mosquitto restart: unless-stopped user: "1002:1002" ports: - "1883:1883" # MQTT - "8883:8883" # MQTTS (secure) - "9001:9001" # WebSockets volumes: - ./mosquitto/config:/mosquitto/config - ./mosquitto/data:/mosquitto/data - ./mosquitto/log:/mosquitto/log - /etc/localtime:/etc/localtime:ro - /etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/chain.pem:/etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/chain.pem:ro - /etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/privkey.pem:/etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/privkey.pem:ro - /etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/cert.pem:/etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/cert.pem:ro
</code></pre>
<p>Créer un dossier mosquitto et les sous dossiers et appliquer les droits : (Celui-ci contiendra la configuration les datas et les logs)</p>
<pre><code class="lang-auto">mkdir /opt/mosquitto/mosquitto
mkdir /opt/mosquitto/mosquitto/data
mkdir /opt/mosquitto/mosquitto/config
mkdir /opt/mosquitto/mosquitto/log
touch mkdir /opt/mosquitto/mosquitto/log/mosquitto.log
chown -R 1002:1002 /opt/mosquitto/mosquitto
</code></pre>
<p>Créer le fichier de config dans /opt/mosquitto/mosquitto/config/mosquitto.conf</p>
<pre><code class="lang-auto">persistence true
persistence_location /mosquitto/data/ log_dest file /mosquitto/log/mosquitto.log listener 1883 localhost
allow_anonymous false
#password_file /mosquitto/config/passwd
tls_version tlsv1.3 listener 8883
certfile /etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/cert.pem
cafile /etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/chain.pem
keyfile /etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/privkey.pem listener 9001
protocol websockets
certfile /etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/cert.pem
cafile /etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/chain.pem
keyfile /etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/privkey.pem
</code></pre>
<p>Activez le SSL : (A adapter en fonction du plugin que vous utilisez pour récupérer le certificat de votre nom de domaine) Ici il s’agit d’un exemple avec infomaniak</p>
<pre><code class="lang-auto">apt install certbot
apt install python3-pip
</code></pre>
<pre><code class="lang-auto">pip install certbot-dns-infomaniak
</code></pre>
<pre><code class="lang-auto">export INFOMANIAK_API_TOKEN=xxx
</code></pre>
<pre><code class="lang-auto">certbot certonly \ --authenticator dns-infomaniak \ --server https://acme-v02.api.letsencrypt.org/directory \ --agree-tos \ --rsa-key-size 4096 \ -d 'mqtt.xxx.local.srv-home.fr'
</code></pre>
<p>Par défaut, certbot installe un service qui renouvelle périodiquement ses certificats automatiquement. Pour ce faire, la commande doit connaître la clé API, sinon elle échouera silencieusement.</p>
<p>Afin d’activer le renouvellement automatique de vos certificats génériques, vous devrez modifier <code>/lib/systemd/system/certbot.service</code>. Ajoutez-y la ligne suivante dans <code>Service</code>, en remplaçant &lt;YOUR_API_TOKEN&gt; par votre jeton :</p>
<pre><code class="lang-auto">Environment="INFOMANIAK_API_TOKEN=&lt;YOUR_API_TOKEN&gt;"
</code></pre>
<p>Ensuite ouvrez le fichier de config</p>
<pre><code class="lang-auto">nano /etc/letsencrypt/renewal/xxx.conf
</code></pre>
<p>Ajouter</p>
<pre><code class="lang-auto">renew_hook = docker restart mosquitto
</code></pre>
<pre><code class="lang-auto">chmod -R 755 /etc/letsencrypt/live
chmod -R 755 /etc/letsencrypt/archive
</code></pre>
<p>Lancer le container</p>
<pre><code class="lang-auto">cd /opt/mosquitto
docker compose up -d
</code></pre>
<p>Vous pouvez voir les logs du container docker :</p>
<pre><code class="lang-auto">docker logs mosquitto -f
</code></pre>
<p>Activer l’authentification (Remplacer username par un utilisateur, par exemple «&nbsp;mqttuser&nbsp;»</p>
<pre><code class="lang-auto">docker exec -it mosquitto mosquitto_passwd -c /mosquitto/config/passwd username
</code></pre>
<p>Décommenter la ligne «&nbsp;password_file /mosquitto/config/passwd&nbsp;» dans le fichier «&nbsp;/opt/mosquitto/mosquitto/config/mosquitto.conf&nbsp;» ce qui donner maintenant</p>
<pre><code class="lang-auto">persistence true
persistence_location /mosquitto/data/ log_dest file /mosquitto/log/mosquitto.log listener 1883 localhost
allow_anonymous false
password_file /mosquitto/config/passwd
tls_version tlsv1.3 listener 8883
certfile /etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/cert.pem
cafile /etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/chain.pem
keyfile /etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/privkey.pem listener 9001
protocol websockets
certfile /etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/cert.pem
cafile /etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/chain.pem
keyfile /etc/letsencrypt/live/mqtt.xxx.local.srv-home.fr/privkey.pem
</code></pre>
<p>Relancer ensuite le container :</p>
<pre><code class="lang-auto">docker restart mosquitto
</code></pre>
<p>Vous pourrez ensuite renseigner ce login dans Gladys et juste après dans zigbee2mqtt <img src="https://gladys-assistant-community.b-cdn.net/images/emoji/apple/slight_smile.png?v=15" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p>
<p><strong>Installation Zigbee2mqtt</strong></p>
<p>Installer une VM sous ubuntu 24.04, mettez la complétement à jour et suivre la procédure suivante :</p>
<h3><a name="p-81813-linux-docker-zigbee2mqtthttpswwwzigbee2mqttioguideinstallation02_dockerhtmlrunning-the-container-1" class="anchor" href="https://community.gladysassistant.com#p-81813-linux-docker-zigbee2mqtthttpswwwzigbee2mqttioguideinstallation02_dockerhtmlrunning-the-container-1" aria-label="Heading link"></a><a href="https://www.zigbee2mqtt.io/guide/installation/02_docker.html#running-the-container">Linux Docker | Zigbee2MQTT</a></h3>
<p>Pour installer docker :</p>
<pre><code class="lang-auto">curl -sSL https://get.docker.com/ | CHANNEL=stable sh
systemctl enable --now docker
</code></pre>
<p>Voici mon fichier docker-compose.yml :</p>
<pre><code class="lang-auto">services: zigbee2mqtt: container_name: zigbee2mqtt image: koenkk/zigbee2mqtt:2.8.0 restart: unless-stopped volumes: - ./data:/app/data - /run/udev:/run/udev:ro - /etc/localtime:/etc/localtime:ro - /etc/letsencrypt/live/z2m.xxx.local.srv-home.fr/fullchain.pem:/etc/letsencrypt/live/z2m.xxx.local.srv-home.fr/fullchain.pem:ro - /etc/letsencrypt/live/z2m.xxx.local.srv-home.fr/privkey.pem:/etc/letsencrypt/live/z2m.xxx.local.srv-home.fr/privkey.pem:ro
# devices:
# - /dev/serial/by-id/usb-Silicon_Labs_Sonoff_Zigbee_3.0_USB_Dongle_Plus_0001-if00-port0:/dev/serial/by-id/usb-Silicon_Labs_Sonoff_Zigbee_3.0_USB_Dongle_Plus_0001-if00-port0 ports: - "443:443" # Port externe 443 → port interne 443 environment: - TZ=Europe/Paris networks: - z2m_net networks: z2m_net: driver: bridge
</code></pre>
<p>Voici mon fichier /opt/z2m/data/configuration.yaml à titre d’exemple, il faut modifier le auth_token qui vous permettra de vous connecter à l’interface web ainsi que le mot de passe de l’utilisateur z2m que l’on a mis précédemment lors de l’installation de MQTT</p>
<pre><code class="lang-auto">homeassistant: enabled: false
mqtt: base_topic: zigbee2mqtt server: mqtts://mqtt.xxx.local.srv-home.fr:8883 user: mqttuser password: achanger keepalive: 60 reject_unauthorized: true version: 4 include_device_information: true
serial: port: tcp://192.168.xx.xx:7638 baudrate: 460800 adapter: zstack disable_led: false
advanced: pan_id: GENERATE network_key: GENERATE channel: 25 homeassistant_legacy_entity_attributes: false legacy_api: false legacy_availability_payload: false log_level: info log_syslog: app_name: Zigbee2MQTT eol: /n host: localhost localhost: localhost path: /dev/log pid: process.pid port: 514 protocol: udp4 type: '5424' last_seen: ISO_8601
frontend: enabled: true package: zigbee2mqtt-windfront port: 443 host: 0.0.0.0 url: https://z2m.xxx.local.srv-home.fr ssl_cert: /etc/letsencrypt/live/z2m.xxx.local.srv-home.fr/fullchain.pem ssl_key: /etc/letsencrypt/live/z2m.xxx.local.srv-home.fr/privkey.pem auth_token: achanger
</code></pre>
<p>Remplacer ceci par l’IP de votre clé et n’oubliez pas de changer auth_token et password</p>
<pre><code class="lang-auto">port: tcp://192.168.xx.xx:7638
</code></pre>
<p>Activer le SSL : (A adapter en fonction du plugin que vous utilisez pour récupérer le certificat de votre nom de domaine) Ici il s’agit d’un exemple avec infomaniak</p>
<pre><code class="lang-auto">apt install certbot
apt install python3-pip
</code></pre>
<pre><code class="lang-auto">pip install certbot-dns-infomaniak
</code></pre>
<pre><code class="lang-auto">export INFOMANIAK_API_TOKEN=xxx
</code></pre>
<pre><code class="lang-auto">certbot certonly \ --authenticator dns-infomaniak \ --server https://acme-v02.api.letsencrypt.org/directory \ --agree-tos \ --rsa-key-size 4096 \ -d 'z2m.xxx.local.srv-home.fr'
</code></pre>
<p>Par défaut, certbot installe un service qui renouvelle périodiquement ses certificats automatiquement. Pour ce faire, la commande doit connaître la clé API, sinon elle échouera silencieusement.</p>
<p>Afin d’activer le renouvellement automatique de vos certificats génériques, vous devrez modifier <code>/lib/systemd/system/certbot.service</code>. Ajoutez-y la ligne suivante dans <code>Service</code>, en remplaçant &lt;YOUR_API_TOKEN&gt; par votre jeton :</p>
<pre><code class="lang-auto">Environment="INFOMANIAK_API_TOKEN=&lt;YOUR_API_TOKEN&gt;"
</code></pre>
<pre><code class="lang-auto">nano /etc/letsencrypt/renewal/z2m.xxx.local.srv-home.fr
</code></pre>
<p>Ajouter (Si vous avez une astuce pour intégrer un reload je suis preneur <img src="https://gladys-assistant-community.b-cdn.net/images/emoji/apple/slight_smile.png?v=15" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p>
<pre><code class="lang-auto">renew_hook = docker restart zigbee2mqtt
</code></pre>
<pre><code class="lang-auto">chmod -R 755 /etc/letsencrypt/live
chmod -R 755 /etc/letsencrypt/archive
</code></pre>
<p>Dans le fichier /etc/systemd/system/zigbee2mqtt.service j’ai du remplacer User=pi par User=root. J’e n’ai pas trouvé de moyen de faire autrement pour le moment mais si vous avez une idée pour le faire tourner avec un utilisateur avec moins de droits, je suis preneur également <img src="https://gladys-assistant-community.b-cdn.net/images/emoji/apple/wink.png?v=15" title=":wink:" class="emoji" alt=":wink:" loading="lazy" width="20" height="20"></p>
<p>Lancer le container</p>
<pre><code class="lang-auto">cd /opt/z2m
docker compose up -d
</code></pre>
<p>Zigbee2mqtt doit être maintenant disponible à l’adresse <a href="https://z2m.xxx.local.srv-home.fr/">https://z2m.xxx.local.srv-home.fr</a> en indiquant bien le mot de passe que vous avez mis dans auth_token</p>
<p><strong>Ne pas utiliser le SSL/TLS</strong></p>
<p>Vous pouvez très bien vous passer de la partie SSL/TLS et utiliser le port 8080 pour Z2M et le port 1883 avec Mqtt en modifiant la conf</p>
<p><strong>Config z2m :</strong></p>
<p>docker-compose.yml :</p>
<pre><code class="lang-auto">services: zigbee2mqtt: container_name: zigbee2mqtt image: koenkk/zigbee2mqtt:2.8.0 restart: unless-stopped volumes: - ./data:/app/data - /run/udev:/run/udev:ro - /etc/localtime:/etc/localtime:ro
# devices:
# - /dev/serial/by-id/usb-Silicon_Labs_Sonoff_Zigbee_3.0_USB_Dongle_Plus_0001-if00-port0:/dev/serial/by-id/usb-Silicon_Labs_Sonoff_Zigbee_3.0_USB_Dongle_Plus_0001-if00-port0 ports: - "8080:8080" # Port externe 8080 → port interne 8080 environment: - TZ=Europe/Paris networks: - z2m_net networks: z2m_net: driver: bridge
</code></pre>
<p>configuration.yaml :</p>
<pre><code class="lang-auto">homeassistant: enabled: false
mqtt: base_topic: zigbee2mqtt server: mqtt://mqtt.xxx.local.srv-home.fr:1883 user: mqttuser password: achanger keepalive: 60 reject_unauthorized: true version: 4 include_device_information: true
serial: port: tcp://192.168.xx.xx:7638 baudrate: 460800 adapter: zstack disable_led: false
advanced: pan_id: GENERATE network_key: GENERATE channel: 25 homeassistant_legacy_entity_attributes: false legacy_api: false legacy_availability_payload: false log_level: info log_syslog: app_name: Zigbee2MQTT eol: /n host: localhost localhost: localhost path: /dev/log pid: process.pid port: 514 protocol: udp4 type: '5424' last_seen: ISO_8601
frontend: enabled: true package: zigbee2mqtt-windfront port: 8080 host: 0.0.0.0 url: http://192.168.xx.xx # ssl_cert: /etc/letsencrypt/live/z2m.xxx.local.srv-home.fr/fullchain.pem # ssl_key: /etc/letsencrypt/live/z2m.xxx.local.srv-home.fr/privkey.pem auth_token: achanger
</code></pre>
<p><strong>Conf mqtt :</strong></p>
<pre><code class="lang-auto">persistence true
persistence_location /mosquitto/data/ log_dest file /mosquitto/log/mosquitto.log listener 1883
allow_anonymous false
password_file /mosquitto/config/passwd
</code></pre>
<p><strong>Configurer ensuite Gladys pour utiliser le broker MQTT externe :</strong></p>
<p></p><div class="lightbox-wrapper"><a class="lightbox" href="https://gladys-assistant-community.b-cdn.net/uploads/default/original/3X/3/9/392332acd2e5cc063d4c2d7bd78e2957e9959e5b.png" data-download-href="https://gladys-assistant-community.b-cdn.net/uploads/default/392332acd2e5cc063d4c2d7bd78e2957e9959e5b" title="image"><img src="https://gladys-assistant-community.b-cdn.net/uploads/default/optimized/3X/3/9/392332acd2e5cc063d4c2d7bd78e2957e9959e5b_2_690x346.png" alt="image" data-base62-sha1="89sCSttGIcTvVAX5KPpkoGeYo55" width="690" height="346" srcset="https://gladys-assistant-community.b-cdn.net/uploads/default/optimized/3X/3/9/392332acd2e5cc063d4c2d7bd78e2957e9959e5b_2_690x346.png, https://gladys-assistant-community.b-cdn.net/uploads/default/optimized/3X/3/9/392332acd2e5cc063d4c2d7bd78e2957e9959e5b_2_1035x519.png 1.5x, https://gladys-assistant-community.b-cdn.net/uploads/default/original/3X/3/9/392332acd2e5cc063d4c2d7bd78e2957e9959e5b.png 2x" data-dominant-color="F6F8F9"></a></div><p></p>
<p>Et tout devrait être ok :</p>
<p></p><div class="lightbox-wrapper"><a class="lightbox" href="https://gladys-assistant-community.b-cdn.net/uploads/default/original/3X/d/c/dc9f9723de81c780b49d942cfd81d8d30e75d840.png" data-download-href="https://gladys-assistant-community.b-cdn.net/uploads/default/dc9f9723de81c780b49d942cfd81d8d30e75d840" title="image"><img src="https://gladys-assistant-community.b-cdn.net/uploads/default/optimized/3X/d/c/dc9f9723de81c780b49d942cfd81d8d30e75d840_2_690x186.png" alt="image" data-base62-sha1="vtIXMTY5QPHGYzJqxCMQ8mJA7hm" width="690" height="186" srcset="https://gladys-assistant-community.b-cdn.net/uploads/default/optimized/3X/d/c/dc9f9723de81c780b49d942cfd81d8d30e75d840_2_690x186.png, https://gladys-assistant-community.b-cdn.net/uploads/default/original/3X/d/c/dc9f9723de81c780b49d942cfd81d8d30e75d840.png 1.5x, https://gladys-assistant-community.b-cdn.net/uploads/default/original/3X/d/c/dc9f9723de81c780b49d942cfd81d8d30e75d840.png 2x" data-dominant-color="F3F2EE"></a></div><p></p>
<p>Le tutoriel n’est peut être pas parfait mais essaye de couvrir tout les cas possible et il est possible que j’ai oublié des choses donc si vous avez des remarques ou des questions, n’hésitez pas <img src="https://gladys-assistant-community.b-cdn.net/images/emoji/apple/slight_smile.png?v=15" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p> <p><small>5 messages - 2 participant(e)s</small></p> <p><a href="https://community.gladysassistant.com/t/connexion-cle-smlight-a-zigbee2mqtt-sur-gladys-full-ssl-tls-mqtt-et-z2m-externe/10041">Lire le sujet en entier</a></p></p>
  </div>
  <div class="article-elevator" aria-label="Navigation article">
    <button class="article-elevator-btn" type="button" onclick="history.back()" title="Retour">←</button>
    <button class="article-elevator-btn" type="button" onclick="scrollToTop()">▲</button>
    <button class="article-elevator-btn" type="button" onclick="scrollToBottom()">▼</button>
  </div>
  <script>
    function stripBlockingPanels() {
      const selector = '[id*="overlay"], [class*="overlay"], [id*="modal"], [class*="modal"], [id*="popup"], [class*="popup"], [id*="paywall"], [class*="paywall"], [id*="subscribe"], [class*="subscribe"], [id*="cookie"], [class*="cookie"], [id*="consent"], [class*="consent"], [id*="gdpr"], [class*="gdpr"], [role="dialog"], [aria-modal="true"]';
      const textPattern = /\b(cookie|consent|gdpr|subscribe|subscription|paywall|abonnez[-\s]?vous|inscrivez[-\s]?vous|continue reading|continuez la lecture|connexion|login|register|inscription|abonnement|premium|subscriber|compte|account|se connecter|sign in|sign up)\b/i;
      document.querySelectorAll(selector).forEach((node) => node.remove());
      document.querySelectorAll('div, section, aside, header, footer, nav').forEach((node) => {
        const styleAttr = String(node.getAttribute('style') || '').toLowerCase();
        const classAndId = String(node.className || '').toLowerCase() + ' ' + String(node.id || '').toLowerCase();
        const text = String(node.textContent || '').slice(0, 1200);
        const hasKeyword = textPattern.test(classAndId) || textPattern.test(text);
        const looksFixed = /(position\s*:\s*(fixed|sticky)|inset\s*:|top\s*:|left\s*:|right\s*:|bottom\s*:)/.test(styleAttr);
        const hasPriority = /(z-index\s*:\s*[1-9]\d{1,}|backdrop-filter|overflow\s*:\s*hidden)/.test(styleAttr);
        if (hasKeyword && (looksFixed || hasPriority)) node.remove();
      });
    }
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'auto' });
    }
    function scrollToBottom() {
      window.scrollTo({ top: document.documentElement.scrollHeight, behavior: 'auto' });
    }
    window.addEventListener('message', (event) => {
      const data = event && event.data;
      if (!data || data.type !== 'AI_PULSE_SCROLL') return;
      if (data.direction === 'up' || data.direction === 'top') scrollToTop();
      if (data.direction === 'down' || data.direction === 'bottom') scrollToBottom();
    });
    stripBlockingPanels();
    setTimeout(stripBlockingPanels, 60);
    setTimeout(stripBlockingPanels, 220);
    setTimeout(stripBlockingPanels, 650);
  </script>
</body>
</html>