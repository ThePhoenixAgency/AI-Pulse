<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Anthropic Just Pushed Everyone to API Billing. Here's How to Cut Your Costs.</title>
<style>
  body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.55; color: #e2e8f0; max-width: 800px; margin: 26px auto; padding: 0 18px; background: #0a0e27; }
  h1 { color: #00d9ff; margin-bottom: 0.35em; line-height: 1.22; font-size: clamp(1.45rem, 2.1vw, 1.95rem); font-weight: 700; }
  h2, h3 { line-height: 1.28; margin: 1.1em 0 0.45em; }
  .metadata { color: #94a3b8; font-size: 0.86em; margin-bottom: 1.2em; border-bottom: 1px solid rgba(0,217,255,0.2); padding-bottom: 0.7em; }
  img { max-width: 100%; width: auto !important; height: auto !important; object-fit: contain !important; border-radius: 8px; display: block; margin: 0.6em auto; }
  a { color: #00d9ff; }
  p { margin-bottom: 0.72em; line-height: 1.58; }
  ul, ol { margin: 0.5em 0 0.9em 1.1em; }
  li { margin: 0.18em 0; }
  blockquote { border-left: 3px solid #825ee4; padding-left: 12px; margin: 0.8em 0; color: #94a3b8; }
  code { background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; color: #ff79c6; }
  pre { background: rgba(0,0,0,0.4); padding: 12px; border-radius: 6px; overflow-x: auto; }
  .article-elevator { position: fixed; right: 14px; bottom: 14px; display: flex; flex-direction: column; gap: 8px; z-index: 9999; }
  .article-elevator-btn { width: 36px; height: 36px; border: 1px solid rgba(0,217,255,0.35); border-radius: 10px; background: rgba(10,14,39,0.88); color: #00d9ff; cursor: pointer; font-size: 16px; line-height: 1; }
  .article-elevator-btn:hover { background: rgba(10,14,39,1); }
  [id*="overlay"], [class*="overlay"], [id*="modal"], [class*="modal"], [id*="popup"], [class*="popup"],
  [id*="paywall"], [class*="paywall"], [id*="subscribe"], [class*="subscribe"], [id*="cookie"], [class*="cookie"],
  [id*="consent"], [class*="consent"], [id*="gdpr"], [class*="gdpr"], [role="dialog"], [aria-modal="true"] {
    display: none !important;
    visibility: hidden !important;
    pointer-events: none !important;
  }
</style>
</head>
<body>
  <h1>Anthropic Just Pushed Everyone to API Billing. Here's How to Cut Your Costs.</h1>
  <div class="metadata">
    Source: Dev.to Open Source | Date: 2/18/2026 5:32:47 PM | <a href="https://dev.to/dor_amir_dbb52baafff7ca5b/anthropic-just-pushed-everyone-to-api-billing-heres-how-to-cut-your-costs-881" target="_blank" rel="noopener noreferrer">Lien</a> | Lang: EN
  </div>
  <div class="content">
    <div><div> <p>Anthropic quietly updated their docs this week with a policy that affects a lot of developers:</p> <blockquote>
<p>"Using OAuth tokens obtained through Claude Free, Pro, or Max accounts in any other product, tool, or service, including the Agent SDK, is not permitted and constitutes a violation of the Consumer Terms of Service."</p>
</blockquote> <p>Translation: if you've been using your $200/month Claude Max subscription in the Agent SDK, OpenCode, Cursor, or any third-party tool, that's no longer allowed. The only place those tokens work is Claude Code CLI itself.</p> <p>For everyone else? You're on API billing now. Every token costs money.</p> <h2> <a name="the-hidden-problem-with-pertoken-billing" href="#the-hidden-problem-with-pertoken-billing"> </a> The hidden problem with per-token billing
</h2> <p>When you had a flat-rate subscription, optimization didn't matter. Send everything to Claude Sonnet, who cares. But on per-token pricing, every prompt counts.</p> <p>Here's what most developers don't realize: the majority of their prompts are simple. "Explain this error." "Reformat this JSON." "Write a docstring for this function." "Convert this to TypeScript."</p> <p>These are all tasks that a smaller, cheaper model handles perfectly fine. But without any routing layer, they all hit your most expensive model at full price.</p> <p>I tracked my own usage for a few weeks. Roughly 60-70% of my prompts fell into the "simple" category. That's a lot of wasted spend.</p> <h2> <a name="what-i-built" href="#what-i-built"> </a> What I built
</h2> <p>NadirClaw is an open source Python proxy that sits between your application and your LLM providers. It classifies each incoming prompt in about 10ms using sentence embeddings and routes it to the appropriate model tier.</p> <p>Simple prompts (summaries, reformatting, basic code generation) go to a cheap model like Gemini Flash or a local Ollama instance. Complex prompts (multi-file refactors, architectural decisions, agentic tool-use loops) go to your premium model.</p> <p>It exposes an OpenAI-compatible API, so you just change your base URL to <code>localhost:8856</code> and everything works. No code changes needed in your application.</p> <h2> <a name="how-the-classification-works" href="#how-the-classification-works"> </a> How the classification works
</h2> <p>The classifier considers several signals:</p> <ul>
<li>
<strong>Vocabulary complexity</strong> of the prompt</li>
<li>
<strong>Code structure</strong>: single file vs multi-file, presence of imports and dependencies</li>
<li>
<strong>System prompt patterns</strong> that indicate agentic workflows</li>
<li>
<strong>Conversation context</strong>: whether the thread involves chain-of-thought reasoning</li>
<li>
<strong>Tool-use detection</strong>: if the prompt contains function calls or multi-step loops, it always routes to the complex tier</li>
</ul> <p>This isn't just checking token count. A short prompt like "refactor the auth module to use JWT" is complex despite being brief. A long prompt that's just "here's my JSON, convert it to YAML" is simple despite being lengthy.</p> <h2> <a name="what-surprised-me-during-development" href="#what-surprised-me-during-development"> </a> What surprised me during development
</h2> <p><strong>Session persistence matters.</strong> Without it, you start a deep conversation on Claude Sonnet, then the next message gets classified as "simple" and goes to Gemini Flash, which has no context for the thread. NadirClaw pins conversations to their initial model.</p> <p><strong>Rate limit fallback is essential.</strong> When your primary model returns a 429, NadirClaw falls back to the other tier instead of just failing. During peak hours, this alone saves a lot of frustration.</p> <p><strong>Context window awareness.</strong> Some conversations grow beyond what the assigned model supports. NadirClaw detects this and auto-migrates to a model with a larger context window.</p> <h2> <a name="setup" href="#setup"> </a> Setup
</h2> <div>
<pre><code>pip <span>install </span>nadirclaw
nadirclaw setup <span># interactive wizard for providers and models</span>
nadirclaw serve <span># starts the proxy on localhost:8856</span>
</code></pre>
<div>
<p> Enter fullscreen mode Exit fullscreen mode </p>
</div>
</div> <p>The setup wizard walks you through picking your providers and models for each tier. You can also configure it manually via <code>~/.nadirclaw/config.yaml</code>.</p> <h2> <a name="results" href="#results"> </a> Results
</h2> <p>In practice, my API costs dropped about 60%. The classification adds roughly 10ms of latency per request, which is unnoticeable. Quality on complex tasks stayed the same because those still hit the premium model.</p> <p>The timing of Anthropic's policy change makes this more relevant than ever. Thousands of developers are about to move from flat-rate to per-token billing without any cost optimization in place.</p> <h2> <a name="links" href="#links"> </a> Links
</h2> <ul>
<li>GitHub: <a href="https://github.com/doramirdor/NadirClaw" target="_blank">github.com/doramirdor/NadirClaw</a>
</li>
<li>MIT licensed</li>
<li>Works with OpenClaw, Cursor, Claude Code, Continue, or anything using the OpenAI API format</li>
</ul> <p>If you're making the switch to API billing, take a look. And if you find it useful, a star on GitHub helps others find it too.</p> </div></div>
  </div>
  <div class="article-elevator" aria-label="Navigation article">
    <button class="article-elevator-btn" type="button" onclick="scrollToTop()">▲</button>
    <button class="article-elevator-btn" type="button" onclick="scrollToBottom()">▼</button>
  </div>
  <script>
    function stripBlockingPanels() {
      const selector = '[id*="overlay"], [class*="overlay"], [id*="modal"], [class*="modal"], [id*="popup"], [class*="popup"], [id*="paywall"], [class*="paywall"], [id*="subscribe"], [class*="subscribe"], [id*="cookie"], [class*="cookie"], [id*="consent"], [class*="consent"], [id*="gdpr"], [class*="gdpr"], [role="dialog"], [aria-modal="true"]';
      const textPattern = /\b(cookie|consent|gdpr|subscribe|subscription|paywall|abonnez[-\s]?vous|inscrivez[-\s]?vous|continue reading|continuez la lecture)\b/i;
      document.querySelectorAll(selector).forEach((node) => node.remove());
      document.querySelectorAll('div, section, aside').forEach((node) => {
        const styleAttr = String(node.getAttribute('style') || '').toLowerCase();
        const classAndId = String(node.className || '').toLowerCase() + ' ' + String(node.id || '').toLowerCase();
        const text = String(node.textContent || '').slice(0, 800);
        const hasKeyword = textPattern.test(classAndId) || textPattern.test(text);
        const looksFixed = /(position\s*:\s*(fixed|sticky)|inset\s*:|top\s*:|left\s*:|right\s*:|bottom\s*:)/.test(styleAttr);
        const hasPriority = /(z-index\s*:\s*[1-9]\d{1,}|backdrop-filter|overflow\s*:\s*hidden)/.test(styleAttr);
        if (hasKeyword && (looksFixed || hasPriority)) node.remove();
      });
    }
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'auto' });
    }
    function scrollToBottom() {
      window.scrollTo({ top: document.documentElement.scrollHeight, behavior: 'auto' });
    }
    window.addEventListener('message', (event) => {
      const data = event && event.data;
      if (!data || data.type !== 'AI_PULSE_SCROLL') return;
      if (data.direction === 'up' || data.direction === 'top') scrollToTop();
      if (data.direction === 'down' || data.direction === 'bottom') scrollToBottom();
    });
    stripBlockingPanels();
    setTimeout(stripBlockingPanels, 60);
    setTimeout(stripBlockingPanels, 220);
    setTimeout(stripBlockingPanels, 650);
  </script>
</body>
</html>